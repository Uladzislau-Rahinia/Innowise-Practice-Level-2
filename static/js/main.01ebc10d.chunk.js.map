{"version":3,"sources":["core/api/firebase.ts","core/services/firebaseDBQueries.ts","core/services/firebaseStorageQueries.ts","redux/slices/PostFeedSlice.ts","core/utils/constants/errors.ts","core/services/firebaseAuthQueries.ts","redux/slices/UserSlice.ts","app/rootReducer.ts","app/store.ts","globalStyles.ts","core/components/styled/TextInput.ts","core/components/styled/Button.ts","core/services/showToast.ts","core/utils/constants/links.ts","redux/selectors/UserSelector.ts","core/pages/Login/styles.ts","core/pages/Login/index.ts","core/pages/Login/Login.tsx","core/pages/Register/styles.ts","core/pages/Register/index.ts","core/pages/Register/Register.tsx","core/components/styled/Link.ts","core/pages/HomePage/styles.ts","redux/selectors/PostFeedSelector.ts","core/pages/HomePage/components/PostsFeed/styles.ts","core/pages/HomePage/components/PostsFeed/index.ts","core/pages/HomePage/components/PostsFeed/PostsFeed.tsx","core/pages/HomePage/index.ts","core/pages/HomePage/HomePage.tsx","core/pages/Paint/styles.ts","core/pages/Paint/components/ControlPanel/colors.ts","core/pages/Paint/components/ControlPanel/instruments.ts","core/assets/brush.png","core/assets/line.png","core/assets/rect.png","core/assets/circle.png","core/pages/Paint/components/ControlPanel/styles.ts","core/pages/Paint/components/ControlPanel/index.ts","core/pages/Paint/components/ControlPanel/ControlPanel.tsx","core/pages/Paint/index.ts","core/pages/Paint/Paint.tsx","core/assets/loader.gif","core/components/styled/Loader.ts","core/utils/FirebaseGate/index.ts","core/utils/FirebaseGate/FirebaseGate.tsx","app/App.tsx","index.tsx"],"names":["process","REACT_APP_FIREBASE_API_KEY","REACT_APP_AUTH_DOMAIN","REACT_APP_DATABASE_URL","firebaseConfig","apiKey","authDomain","projectId","REACT_APP_PROJECT_ID","storageBucket","REACT_APP_STORAGE_BUCKET","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","appId","REACT_APP_APP_ID","databaseURL","firebaseApp","firebase","initializeApp","database","auth","storage","createUser","uid","username","a","tasksRef","ref","newUser","update","then","getPosts","route","postsRef","get","snapshot","exists","val","addNewPost","newPost","push","getUsername","saveImage","data","child","v4","putString","metadata","fullPath","catch","error","getImage","path","getDownloadURL","url","fetchPosts","createAsyncThunk","res","savePost","img","imgPath","imgURL","author","date","Date","now","toString","PostsFeedSlice","createSlice","name","initialState","reducers","extraReducers","fulfilled","state","action","Object","entries","payload","map","postsFeed","ERROR_MESSAGES","default","loginUser","email","password","signInWithEmailAndPassword","userCredential","user","code","registerUser","createUserWithEmailAndPassword","logoutUser","signOut","signUp","registerRes","signIn","loginRes","usernameRes","signInCheckResult","Error","logOut","userSlice","isLoggedIn","isPending","isError","errorMessage","clearState","rejected","message","pending","actions","rootReducer","combineReducers","postsFeedReducer","userData","userReducer","store","configureStore","reducer","GlobalStyles","createGlobalStyle","TextInput","styled","input","Button","button","props","isDanger","showErrorToast","text","toast","position","POSITION","TOP_CENTER","autoClose","ToastContainer","LINKS","ROOT","HOME","LOGIN","REGISTER","PAINT","getUserData","LoginWrapper","div","LoginContainer","LoginPage","useState","setEmail","setPassword","useSelector","dispatch","useDispatch","history","useHistory","handleLogin","useEffect","onChange","e","target","value","type","placeholder","onClick","to","RegisterWrapper","RegisterContainer","RegisterPage","passwordComfirm","setPasswordConfirm","setUsername","handleSignUp","ButtonLink","Link","PaintListWrapper","ButtonWrapper","FeedWrapper","PostItem","PostsFeed","filter","setFilter","posts","postItems","useMemo","slice","toLowerCase","includes","sort","b","compareDesc","post","src","alt","formatDistance","HomePage","useLayoutEffect","window","scroll","handleLogOut","StyledCanvas","canvas","PaintWrapper","isPainting","colors","instruments","ControlPanelWrapper","ColorPickerContainer","InstrumentPickerContainer","Instrument","isPicked","ColorPickerItem","color","LineWidthSlider","ControlPanel","React","memo","handleColorPick","handleLineWidthPick","handleInstrumentPick","pickedInstrument","pickedColor","id","index","defaultValue","min","max","step","Paint","canvasRef","useRef","ctx","setCtx","setIsPainting","offsetX","offsetY","prevPos","setPrevPosition","setSnapshot","setColor","instrument","setInstrument","lineWidth","setLineWidth","canvasSize","setCanvasSize","onresize","outerWidth","current","getContext","loadSnapshot","useCallback","putImageData","handleMouseDown","nativeEvent","TouchEvent","touches","pageX","pageY","offsetLeft","offsetTop","handleMouseMove","currPos","currPosition","x","y","deltaX","deltaY","radius","Math","sqrt","strokeStyle","lineCap","parseInt","beginPath","moveTo","lineTo","clearRect","width","height","rect","arc","PI","stroke","paint","endPainting","getImageData","handleSave","toDataURL","currentTarget","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseLeave","onMouseUp","Loader","attrs","loader","FirebaseGate","children","onAuthStateChanged","App","from","exact","component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.01ebc10d.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst {\r\n  REACT_APP_FIREBASE_API_KEY,\r\n  REACT_APP_AUTH_DOMAIN,\r\n  REACT_APP_DATABASE_URL,\r\n  REACT_APP_PROJECT_ID,\r\n  REACT_APP_STORAGE_BUCKET,\r\n  REACT_APP_MESSAGING_SENDER_ID,\r\n  REACT_APP_APP_ID,\r\n} = process.env;\r\n\r\nconst firebaseConfig = {\r\n  apiKey: REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: REACT_APP_AUTH_DOMAIN,\r\n  projectId: REACT_APP_PROJECT_ID,\r\n  storageBucket: REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: REACT_APP_APP_ID,\r\n  databaseURL: REACT_APP_DATABASE_URL,\r\n};\r\n// // Initialize Firebase\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n// firebase.analytics();\r\nconst database = firebaseApp.database();\r\nconst auth = firebaseApp.auth();\r\nconst storage = firebaseApp.storage();\r\n\r\n// if (window.location.hostname === \"localhost\") {\r\n//   // Point to the RTDB emulator running on localhost.\r\n//   database.useEmulator(\"localhost\", 9000);\r\n//   auth.useEmulator(\"localhost\", 9099);\r\n// }\r\n\r\nexport { database, auth, storage };\r\n","import { database } from 'core/api/firebase';\r\nimport { Post } from 'core/utils/types';\r\n\r\ninterface Posts {\r\n  [name:string]:Post\r\n}\r\n\r\nexport const createUser = async (uid:string, username:string):Promise<boolean> => {\r\n  const tasksRef = database.ref(`users/${uid}`);\r\n  const newUser = { username: '' };\r\n  newUser.username = username;\r\n  return tasksRef.update(newUser).then(() => true);\r\n};\r\n\r\nexport const getPosts = async (route:string):Promise<Posts> => {\r\n  const postsRef = database.ref(route);\r\n  return postsRef.get().then((snapshot) => {\r\n    if (snapshot.exists()) {\r\n      return snapshot.val();\r\n    }\r\n    const message = 'No data availible';\r\n    throw message;\r\n  });\r\n};\r\n\r\nexport const addNewPost = async (newPost:Post, route:string):Promise<boolean> => {\r\n  const postsRef = database.ref(route);\r\n  return postsRef.push(newPost).then(() => true);\r\n};\r\n\r\nexport const getUsername = async (uid:string):Promise<string> => {\r\n  const postsRef = database.ref(`users/${uid}/username`);\r\n  return postsRef.get().then((snapshot) => {\r\n    if (snapshot.exists()) {\r\n      return snapshot.val();\r\n    }\r\n    const message = 'No data availible';\r\n    throw message;\r\n  });\r\n};\r\n","import { storage } from 'core/api/firebase';\r\nimport { v4 } from 'uuid';\r\n\r\nexport const saveImage = async (data:string, uid:string):Promise<string> => storage.ref()\r\n  .child(`images/${uid}/${v4()}.png`)\r\n  .putString(data, 'data_url')\r\n  .then((snapshot) => snapshot.metadata.fullPath)\r\n  .catch((error) => {\r\n    throw error;\r\n  });\r\n\r\nexport const getImage = async (path:string):Promise<string> => (\r\n  storage.ref().child(path).getDownloadURL().then((url) => url)\r\n    .catch((error) => {\r\n      throw error;\r\n    }));\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { addNewPost, getPosts } from 'core/services/firebaseDBQueries';\r\nimport { saveImage, getImage } from 'core/services/firebaseStorageQueries';\r\nimport { Post } from 'core/utils/types';\r\n\r\nexport const fetchPosts = createAsyncThunk('postsFeed/fetchPosts', async () => {\r\n  const res = await getPosts('posts');\r\n  return res;\r\n});\r\n\r\nexport const savePost = createAsyncThunk('postsFeed/savePost',\r\n  async ({ img, uid, username }: {img:string, uid:string, username:string}) => {\r\n    const imgPath = await saveImage(img, uid);\r\n    const imgURL = await getImage(imgPath);\r\n    const newPost = { path: imgURL, author: username, date: new Date(Date.now()).toString() };\r\n    await addNewPost(newPost, 'posts');\r\n    return newPost;\r\n  });\r\n\r\nexport const PostsFeedSlice = createSlice({\r\n  name: 'postsFeed',\r\n  initialState: [] as Post[],\r\n  reducers: {\r\n  },\r\n  extraReducers: {\r\n    [fetchPosts.fulfilled.toString()]: (state, action:PayloadAction<Post>) => (\r\n      Object.entries(action.payload).map((postsFeed) => postsFeed[1])\r\n    ),\r\n    [savePost.fulfilled.toString()]: (state, action:PayloadAction<Post>) => {\r\n      state.push(action.payload);\r\n    },\r\n  },\r\n});\r\n\r\nexport default PostsFeedSlice.reducer;\r\n","const ERROR_MESSAGES: Record<string, string> = {\r\n  'auth/invalid-email': 'Enter valid email please',\r\n  'auth/user-not-found': 'User with this email not found',\r\n  'auth/wrong-password': 'Wrong password, try again',\r\n  'auth/weak-password':\r\n      'Password is too weak, it should be at least 6 characters',\r\n  'auth/email-already-in-use': 'This email is already taken',\r\n  default: 'Something went wrong :C',\r\n} as const;\r\n\r\nexport default ERROR_MESSAGES;\r\n","import { auth } from 'core/api/firebase';\r\nimport ERROR_MESSAGES from 'core/utils/constants/errors';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nexport const loginUser = async (email:string, password:string):Promise<string> => auth\r\n  .signInWithEmailAndPassword(email, password)\r\n  .then((userCredential) => {\r\n    if (userCredential.user) return userCredential.user.uid;\r\n    return '';\r\n  })\r\n  .catch((error) => {\r\n    const message = ERROR_MESSAGES[error.code]\r\n      ? ERROR_MESSAGES[error.code]\r\n      : ERROR_MESSAGES.default;\r\n    throw message;\r\n  });\r\n\r\nexport const registerUser = async (email:string, password:string) : Promise<string> => auth\r\n  .createUserWithEmailAndPassword(email, password)\r\n  .then((userCredential) => {\r\n    if (userCredential.user) return userCredential.user.uid;\r\n    return '';\r\n  })\r\n  .catch((error) => {\r\n    const message = ERROR_MESSAGES[error.code]\r\n      ? ERROR_MESSAGES[error.code]\r\n      : ERROR_MESSAGES.default;\r\n    throw message;\r\n  });\r\n\r\nexport const logoutUser = async (): Promise<void> => auth.signOut();\r\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { createUser, getUsername } from 'core/services/firebaseDBQueries';\r\nimport {\r\n  loginUser, logoutUser, registerUser,\r\n} from 'core/services/firebaseAuthQueries';\r\nimport { UserData } from 'core/utils/types';\r\n\r\nexport const signUp = createAsyncThunk('user/signUp',\r\n  async ({ email, password, username }:{email:string, password:string, username:string}) => {\r\n    const registerRes = await registerUser(email, password);\r\n    await createUser(registerRes, username);\r\n    return { uid: registerRes, username };\r\n  });\r\n\r\nexport const signIn = createAsyncThunk('user/signIn',\r\n  async ({ email, password }: {email:string, password:string}) => {\r\n    const loginRes = await loginUser(email, password);\r\n    const usernameRes = await getUsername(loginRes);\r\n    return { uid: loginRes, username: usernameRes };\r\n  });\r\n\r\nexport const signInCheckResult = createAsyncThunk('user/signInCheckResult',\r\n  async (uid:string | undefined) => {\r\n    if (uid) {\r\n      const usernameRes = await getUsername(uid);\r\n      return { uid, username: usernameRes };\r\n    }\r\n    throw new Error();\r\n  });\r\n\r\nexport const logOut = createAsyncThunk('user/logOut', async () => {\r\n  await logoutUser();\r\n});\r\n\r\nexport const userSlice = createSlice({\r\n  name: 'user',\r\n  initialState: {\r\n    uid: '',\r\n    username: '',\r\n    isLoggedIn: false,\r\n    isPending: true,\r\n    isError: false,\r\n    errorMessage: '',\r\n  } as UserData,\r\n  reducers: {\r\n    clearState(state) {\r\n      return { ...state, isError: false, isPending: false };\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [signIn.fulfilled.toString()]: (state, action) => ({\r\n      ...state, uid: action.payload.uid, username: action.payload.username, isLoggedIn: true,\r\n    }),\r\n    [signIn.rejected.toString()]: (state, action) => ({\r\n      ...state, isError: true, errorMessage: action.error.message,\r\n    }),\r\n    [signUp.fulfilled.toString()]: (state, action) => ({\r\n      ...state, uid: action.payload.uid, username: action.payload.username, isLoggedIn: true,\r\n    }),\r\n    [signUp.rejected.toString()]: (state, action) => ({\r\n      ...state, isError: true, errorMessage: action.error.message,\r\n    }),\r\n    [logOut.fulfilled.toString()]: (state) => ({\r\n      ...state, isLoggedIn: false,\r\n    }),\r\n    [signInCheckResult.fulfilled.toString()]: (state, action) => ({\r\n      ...state,\r\n      uid: action.payload.uid,\r\n      username: action.payload.username,\r\n      isLoggedIn: true,\r\n      isPending: false,\r\n    }),\r\n    [signInCheckResult.rejected.toString()]: (state) => ({\r\n      ...state, isPending: false,\r\n    }),\r\n    [signInCheckResult.pending.toString()]: (state) => ({ ...state, isPending: true }),\r\n  },\r\n});\r\n\r\nexport const { clearState } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n","import { combineReducers } from '@reduxjs/toolkit';\r\nimport postsFeedReducer from 'redux/slices/PostFeedSlice';\r\nimport userReducer from 'redux/slices/UserSlice';\r\n\r\nconst rootReducer = combineReducers({\r\n  postsFeed: postsFeedReducer,\r\n  userData: userReducer,\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport default rootReducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport rootReducer from './rootReducer';\r\n// ...\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import { createGlobalStyle } from 'styled-components';\n\nconst GlobalStyles = createGlobalStyle`\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\",\n      \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",\n      monospace;\n  }\n`;\n\nexport default GlobalStyles;\n","import styled from 'styled-components';\r\n\r\nconst TextInput = styled.input`\r\n  font-family: inherit;\r\n  height: 30px;\r\n  border: 3px solid orange;\r\n  border-radius: 10px;\r\n  width: 280px;\r\n  outline: none;\r\n`;\r\n\r\nexport default TextInput;\r\n","import styled from 'styled-components';\r\n\r\nconst Button = styled.button<{isDanger?:boolean}>`\r\n  max-width: 220px;\r\n  width: 40%;\r\n  height: 30px;\r\n  background-color:${(props) => (props.isDanger ? 'red' : 'orange')};\r\n  border: 0;\r\n  border-radius: 10px;\r\n  color: white;\r\n  outline: none;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n`;\r\n\r\nexport default Button;\r\n","import { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nexport const showErrorToast = (text: string): void => {\r\n  toast.error(text, {\r\n    position: toast.POSITION.TOP_CENTER,\r\n    autoClose: 3500,\r\n  });\r\n};\r\n\r\nexport const showSuccessToast = (text: string): void => {\r\n  toast.success(text, {\r\n    position: toast.POSITION.TOP_CENTER,\r\n    autoClose: 3500,\r\n  });\r\n};\r\n\r\nexport default ToastContainer;\r\n","const LINKS: Record<string, string> = {\r\n  ROOT: '/',\r\n  HOME: '/home',\r\n  LOGIN: '/login',\r\n  REGISTER: '/register',\r\n  PAINT: '/paint',\r\n} as const;\r\n\r\nexport default LINKS;\r\n","import { RootState } from 'app/rootReducer';\r\nimport { UserData } from 'core/utils/types';\r\n\r\nconst getUserData = (state: RootState): UserData => state.userData;\r\n\r\nexport default getUserData;\r\n","import styled from 'styled-components';\r\n\r\nexport const LoginWrapper = styled.div`\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  font-family: \"Rowdies\";\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  background-color: orange;\r\n  & > span {\r\n    color: white;\r\n    font-size: 50px;\r\n    margin-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport const LoginContainer = styled.div`\r\n  width: 300px;\r\n  height: 400px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: white;\r\n  justify-content: space-evenly;\r\n`;\r\n","import LoginPage from './Login';\n\nexport default LoginPage;\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport TextInput from 'core/components/styled/TextInput';\r\nimport Button from 'core/components/styled/Button';\r\nimport ToastContainer, { showErrorToast } from 'core/services/showToast';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { signIn, clearState } from 'redux/slices/UserSlice';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { LoginWrapper, LoginContainer } from './styles';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const { isLoggedIn, isError, errorMessage } = useSelector(getUserData);\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const handleLogin = async () => {\r\n    if (email === '' || password === '') {\r\n      showErrorToast('Fill all fields please');\r\n      return;\r\n    }\r\n\r\n    dispatch(signIn({ email, password }));\r\n    // const res = await loginUser(email, password);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      dispatch(clearState());\r\n      history.push(LINKS.HOME);\r\n    }\r\n\r\n    if (isError) {\r\n      showErrorToast(errorMessage);\r\n      dispatch(clearState());\r\n    }\r\n  }, [isLoggedIn, isError]);\r\n\r\n  return (\r\n    <LoginWrapper>\r\n      <span>Mini-Paint</span>\r\n      <LoginContainer>\r\n        <span>Please Login</span>\r\n        <TextInput\r\n          onChange={(e) => setEmail((e.target as HTMLInputElement).value)}\r\n          value={email}\r\n          type=\"text\"\r\n          placeholder=\"E-mail\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setPassword((e.target as HTMLInputElement).value)}\r\n          value={password}\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n        />\r\n        <Button onClick={handleLogin}>Sign In</Button>\r\n        <Link to=\"/register\">Dont have an account? Sign Up here!</Link>\r\n      </LoginContainer>\r\n      <ToastContainer />\r\n    </LoginWrapper>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","import styled from 'styled-components';\r\n\r\nexport const RegisterWrapper = styled.div`\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  font-family: \"Rowdies\";\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  background-color: orange;\r\n  & > span {\r\n    color: white;\r\n    font-size: 50px;\r\n    margin-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport const RegisterContainer = styled.div`\r\n  width: 300px;\r\n  height: 400px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: white;\r\n  justify-content: space-evenly;\r\n`;\r\n","import RegisterPage from './Register';\n\nexport default RegisterPage;\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport TextInput from 'core/components/styled/TextInput';\r\nimport Button from 'core/components/styled/Button';\r\nimport ToastContainer, { showErrorToast } from 'core/services/showToast';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { clearState, signUp } from 'redux/slices/UserSlice';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { RegisterWrapper, RegisterContainer } from './styles';\r\n\r\nconst RegisterPage: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [passwordComfirm, setPasswordConfirm] = useState('');\r\n  const [username, setUsername] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n  const { isError, isLoggedIn, errorMessage } = useSelector(getUserData);\r\n\r\n  const handleSignUp = async () => {\r\n    if (\r\n      email === ''\r\n      || username === ''\r\n      || password === ''\r\n      || passwordComfirm === ''\r\n    ) {\r\n      showErrorToast('Fill all fields please');\r\n      return;\r\n    }\r\n    if (password !== passwordComfirm) {\r\n      showErrorToast('Passwords should match');\r\n      return;\r\n    }\r\n\r\n    dispatch(signUp({ email, password, username }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      dispatch(clearState());\r\n      history.push(LINKS.HOME);\r\n    }\r\n    if (isError) {\r\n      dispatch(clearState());\r\n      showErrorToast(errorMessage);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <RegisterWrapper>\r\n      <span>Mini-Paint</span>\r\n      <RegisterContainer>\r\n        <span>Please Register</span>\r\n        <TextInput\r\n          onChange={(e) => setEmail((e.target as HTMLInputElement).value)}\r\n          value={email}\r\n          type=\"text\"\r\n          placeholder=\"E-mail\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setUsername((e.target as HTMLInputElement).value)}\r\n          value={username}\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setPassword((e.target as HTMLInputElement).value)}\r\n          value={password}\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setPasswordConfirm((e.target as HTMLInputElement).value)}\r\n          value={passwordComfirm}\r\n          type=\"password\"\r\n          placeholder=\"Comfirm password\"\r\n        />\r\n        <Button onClick={handleSignUp}>Sign Up</Button>\r\n        <Link to=\"/login\">Already have an account? Sign In here!</Link>\r\n      </RegisterContainer>\r\n      <ToastContainer />\r\n    </RegisterWrapper>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;\r\n","import styled from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ButtonLink = styled(Link)`\r\n  max-width: 220px;\r\n  width: 40%;\r\n  height: 30px;\r\n  background-color: orange;\r\n  border: 0;\r\n  border-radius: 10px;\r\n  color: white;\r\n  outline: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-decoration: none;\r\n`;\r\n\r\nexport default ButtonLink;\r\n","import styled from 'styled-components';\r\n\r\nexport const PaintListWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  max-width: 768px;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  margin:20px;\r\n`;\r\n","import { RootState } from 'app/rootReducer';\r\nimport { Post } from 'core/utils/types';\r\n\r\nconst getPosts = (state: RootState): Post[] => state.postsFeed;\r\n\r\nexport default getPosts;\r\n","import styled from 'styled-components';\r\n\r\nexport const FeedWrapper = styled.div`\r\n    max-width: 768px;\r\n    display:flex;\r\n    flex-direction: column;\r\n    align-items:center;\r\n`;\r\n\r\nexport const PostItem = styled.div`\r\n    min-height: 320px;\r\n    width: 90%;\r\n    display:flex;\r\n    flex-direction: column;\r\n    align-items:center;\r\n    margin-top:20px;\r\n\r\n    & > img {\r\n        border: 10px solid black;\r\n        width: 100%;\r\n    }\r\n\r\n    & > div {\r\n        width: 100%;\r\n        display:flex;\r\n        flex-direction: row;\r\n        justify-content:space-evenly;\r\n    }\r\n`;\r\n","import PostsFeed from './PostsFeed';\r\n\r\nexport default PostsFeed;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport getPosts from 'redux/selectors/PostFeedSelector';\r\nimport { formatDistance, compareDesc } from 'date-fns';\r\nimport TextInput from 'core/components/styled/TextInput';\r\nimport { FeedWrapper, PostItem } from './styles';\r\n\r\nconst PostsFeed = (): JSX.Element => {\r\n  const [filter, setFilter] = useState('');\r\n  const posts = useSelector(getPosts);\r\n  const postItems = useMemo(\r\n    () => {\r\n      const filteredPosts = filter === '' ? posts.slice()\r\n        : posts.filter((value) => value.author.toLowerCase().includes(filter.toLowerCase()));\r\n      return filteredPosts.sort((a, b) => compareDesc(new Date(a.date), new Date(b.date)))\r\n        .map((post) => (\r\n          <PostItem>\r\n            <img src={post.path} alt=\"\" />\r\n            <div>\r\n              <span>\r\n                Author:\r\n                {' '}\r\n                {post.author}\r\n              </span>\r\n              <span>\r\n                Date:\r\n                {' '}\r\n                {formatDistance(new Date(Date.now()), new Date(post.date))}\r\n                {' '}\r\n                ago\r\n              </span>\r\n            </div>\r\n          </PostItem>\r\n        ));\r\n    },\r\n    [posts, filter],\r\n  );\r\n  return (\r\n    <>\r\n      <TextInput\r\n        onChange={(e) => setFilter((e.target as HTMLInputElement).value)}\r\n        value={filter}\r\n        type=\"text\"\r\n        placeholder=\"Filter by user\"\r\n      />\r\n      <FeedWrapper>{postItems}</FeedWrapper>\r\n    </>\r\n  );\r\n};\r\nexport default PostsFeed;\r\n","import HomePage from './HomePage';\r\n\r\nexport default HomePage;\r\n","import React, { useEffect, useLayoutEffect } from 'react';\r\nimport Button from 'core/components/styled/Button';\r\nimport ButtonLink from 'core/components/styled/Link';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fetchPosts } from 'redux/slices/PostFeedSlice';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { logOut } from 'redux/slices/UserSlice';\r\nimport { PaintListWrapper, ButtonWrapper } from './styles';\r\nimport PostsFeed from './components/PostsFeed';\r\n\r\nconst HomePage:React.FC = () => {\r\n  const history = useHistory();\r\n\r\n  const { isLoggedIn } = useSelector(getUserData);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useLayoutEffect(() => {\r\n    window.scroll(0, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      dispatch(fetchPosts());\r\n    } else {\r\n      history.push(LINKS.LOGIN);\r\n    }\r\n  }, [isLoggedIn]);\r\n\r\n  const handleLogOut = async () => {\r\n    dispatch(logOut());\r\n  };\r\n\r\n  return (\r\n    <PaintListWrapper>\r\n      <ButtonWrapper>\r\n        <ButtonLink to={LINKS.PAINT}>+ New painting</ButtonLink>\r\n        <Button onClick={handleLogOut}>Log Out</Button>\r\n      </ButtonWrapper>\r\n      <PostsFeed />\r\n    </PaintListWrapper>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import styled from 'styled-components';\r\n\r\nexport const StyledCanvas = styled.canvas`\r\n    border: 5px solid black;\r\n`;\r\n\r\nexport const PaintWrapper = styled.div<{isPainting:boolean}>`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items:center;\r\n    min-height: 100vh;\r\n    ${(props) => (props.isPainting ? 'overflow:hidden; height:100vh;' : '')}\r\n    & > span {\r\n        font-size: 50px;\r\n        font-weight: bolder;\r\n    }\r\n`;\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  max-width: 768px;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  margin:20px;\r\n\r\n  @media(max-width:768px) {\r\n      flex-direction: column;\r\n      align-items: center;\r\n  }\r\n\r\n  & > * {\r\n      margin-bottom: 20px;\r\n  }\r\n`;\r\n","const colors = [\r\n  'black',\r\n  'red',\r\n  'green',\r\n  'blue',\r\n  'yellow',\r\n  'purple',\r\n  'pink',\r\n  'cyan',\r\n  'brown',\r\n  'orange',\r\n  'silver',\r\n  'gold',\r\n  'lime'];\r\n\r\nexport default colors;\r\n","import brush from 'core/assets/brush.png';\r\nimport rect from 'core/assets/rect.png';\r\nimport circle from 'core/assets/circle.png';\r\nimport line from 'core/assets/line.png';\r\n\r\nconst instruments = [brush, line, rect, circle];\r\n\r\nexport default instruments;\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGcSURBVHic5dK9TQNBEIDRt0BGAyAyR/RARAM0QUAHroBaKMANEJETIiERAl0sgY2ELGP77Lv9nXCieZ8mxBj1MiGEGea4wwKPZ3lPSjchhGs842K1eoDQwwdswP/O10mGe5LOFjwsmv6AHfhv3DT7AXvgb2OMH00G2BP/Bs0FGIKnsQBD8TQU4BA8jQQ4FE8DAY7BU3mAY/FUHGAMPJUGGAtPhQHGxFNZgLHxVBRgCjyVBJgKTwUBpsRTeICp8RQcIAWeQgOkwlNggJR4CguQGk9BAXLgKSRALjwFBMiJJ3OA3HgyBigBT6YApeDJEKAkPIkDlIYnYYAS8SQKUCqeBAFKxjNxgNLxTBigBjwTBagFzwQBasIzcoDa8IwYoEY8IwWoFc8IAWrGc2SA2vEcEaAFPAcGaAXPAQFawjMwQGt4BgRoEc+eAVrFs0eAlvHsCNA6ni0BesDzT4Be8GwI0BOetQC94fkToEc8qwC94iFghhcd4ll+wFyneJYf8InLtX0XeJYfsFjbdYOHU7ziHFd4wn2M8T3rVQnnBxnUc+IPCTq6AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAApXAAAKVwGn8z/gAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAABJQTFRF////AAAAAAAAAAAAAAAAAAAAZJzAmgAAAAV0Uk5TAECQsMTcoE5tAAAAN0lEQVRIS2NgGAUjCSgRAAyhBABDqLMxHmACVCCAzwGMowpGFYwqGCgFBDMvoexPsAAZBSMJAACc1z+f7W9pCwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAO4SURBVHic7Zu/ThVBGMV/syaEhFZFLyaY8ABgQehugdFOQ4fhDWh5Aq1teAeItYklaiEJCcQQfIBLMJGrgi2BQvgsdlaGb2evi+zO4o4n2eLunZnvnDMzu7Pzx4gIdcIYMwLMAhNAx3MB9D1XD3gvIke18qvDAGPMLeAJMAc8Aob/sqgTYA14DbwRkcNqGDoQkUouYAhYBNaBU0Aqvk6BDzbGUGW8KxBugAVg9xJifgL7wEd77dt7ZfPv2pimUQOAx8D2H8juAcukXeIBcAdIPGUl9r8HNu2yzTuo7G3gcXADgDHSvllEbAd4DkxV0MKmbFk7A+KtAWNBDACmSZ/SPiKbQPeqogfE7toYvth9YLpWA4BnwLEneA+Yr6JPluBgbKyeh8cx8KxyA2zQFwUBl6jwqXwJI4ZsbF+FvChbGWXFrxQ0uZnQwj38Zgq65EoZE8oE8NX8FtBpWrzDsWM55VrClQywfV4XugoMNy3aw3XYctN8Bz4TBhU47elfq00LLWGENuF40NuhqJAxT7/auo41X9ASdHfoUzBOKCpED3L616nPlzCh46nAtVIGkA5vdRNq/Gn/FybMeLpwbtisMxnyY/ulpsVcwYQlpWVbvxp1hgWVoUcDg5wKDRgiP2Jc8BpgE+tP2vmmRVRgwrzStOtWqptwUSXc1M3lX7xst9YfUIs+A9ZVotq+6howoau0rWf/GRHJ5vC+kU5KAHwSkSlaBGPMDjBpf54Bd0TkMBP8lHPxkE5Ctg2upoRU82/RcwMStwVa0xykD4gR4AfnU9efReR+OF7hYIzZA8btzxPgZkK6aOHO27ex9jO42oaB2YR0xcbFu3B8gkNrm0g4X57K8CUQmSagtXV8BnwNRKYJaG05A06Bg3B8guOAVGOGnAHfReQsLKdwsNq+O7dyBrS5+WdwNXaSwmSRICGdOspwtykiAeFq7GsDRo0xrW0VVtuocytnwA3gdlBWYXGbVGOGnAHQ7m6gtXkNuBeITBPQ2voJ6aShi4eByDQBra33/3NY0n14b51048aYVk2HAVhN486ttyJylL3yvLMlLYN31uv/pCiApDswN5z0k8aYbmCOtcFqmXRubVjNF2aCX6l8L40xpm5ydcNqeKlun2t1Fg/iXhqzieNdHLUZ4l4et5ni3SDhZI53i4wtIO5NUrageLfJOYXFu1HSKTjerbK28Lg3SzsmxLldXgWN88CEIhDvkRmHSLyHphS5OI/NKeLxHpxURvyTR2ejPzxdiwEXAlzz4/O/AIJwJrWPabzKAAAAAElFTkSuQmCC\"","import styled from 'styled-components';\r\n\r\nexport const ControlPanelWrapper = styled.div`\r\n    max-width: 500px;\r\n    min-height: 400px;\r\n    width:90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n`;\r\n\r\nexport const ColorPickerContainer = styled.div`\r\n    width: 100%;\r\n    height: 75%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n`;\r\n\r\nexport const InstrumentPickerContainer = styled.div`\r\n    width: 100%;\r\n    min-height: 70px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n`;\r\n\r\nexport const Instrument = styled.img<{isPicked:boolean}>`\r\n    width: 50px;\r\n    height: 50px;\r\n    margin: 20px;\r\n    ${(props) => (props.isPicked ? 'border: 2px dotted black;' : '')}\r\n`;\r\n\r\nexport const ColorPickerItem = styled.div<{isPicked:boolean}>`\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 50%;\r\n    margin: 20px;\r\n    background-color: ${(props) => props.color};\r\n    ${(props) => (props.isPicked ? 'padding:5px;' : '')}\r\n`;\r\n\r\nexport const LineWidthSlider = styled.input`\r\n    width: 200px;\r\n    height: 10px;\r\n    margin: 20px;\r\n`;\r\n","import ControlPanel from './ControlPanel';\r\n\r\nexport default ControlPanel;\r\n","import React, { SyntheticEvent } from 'react';\r\nimport colors from './colors';\r\nimport instruments from './instruments';\r\nimport {\r\n  ControlPanelWrapper,\r\n  ColorPickerContainer,\r\n  ColorPickerItem,\r\n  LineWidthSlider,\r\n  InstrumentPickerContainer,\r\n  Instrument,\r\n} from './styles';\r\n\r\ninterface ControlPanelProps {\r\n  handleColorPick: (e: SyntheticEvent) => void;\r\n  handleLineWidthPick: (e: SyntheticEvent) => void;\r\n  handleInstrumentPick: (e: SyntheticEvent) => void;\r\n  pickedInstrument: string;\r\n  pickedColor:string;\r\n}\r\n\r\nconst ControlPanel = React.memo((props: ControlPanelProps): JSX.Element => {\r\n  const {\r\n    handleColorPick, handleLineWidthPick, handleInstrumentPick, pickedInstrument, pickedColor,\r\n  } = props;\r\n  return (\r\n    <ControlPanelWrapper>\r\n      <span>Colors:</span>\r\n      <ColorPickerContainer>\r\n        {colors.map((value) => (\r\n          <ColorPickerItem\r\n            isPicked={value === pickedColor}\r\n            id={value}\r\n            onClick={handleColorPick}\r\n            color={value}\r\n          />\r\n        ))}\r\n      </ColorPickerContainer>\r\n      <span>Tools:</span>\r\n      <InstrumentPickerContainer>\r\n        {instruments.map((value, index) => (\r\n          <Instrument\r\n            isPicked={index.toString() === pickedInstrument}\r\n            src={value}\r\n            id={index.toString()}\r\n            onClick={handleInstrumentPick}\r\n          />\r\n        ))}\r\n      </InstrumentPickerContainer>\r\n      <span>Thickness:</span>\r\n      <LineWidthSlider\r\n        defaultValue={1}\r\n        min={1}\r\n        max={20}\r\n        step={1}\r\n        type=\"range\"\r\n        onChange={handleLineWidthPick}\r\n      />\r\n    </ControlPanelWrapper>\r\n  );\r\n});\r\n\r\nexport default ControlPanel;\r\n","import Paint from './Paint';\r\n\r\nexport default Paint;\r\n","import React, {\r\n  SyntheticEvent, useCallback, useEffect, useLayoutEffect, useRef, useState,\r\n} from 'react';\r\nimport Button from 'core/components/styled/Button';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport ButtonLink from 'core/components/styled/Link';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { savePost } from 'redux/slices/PostFeedSlice';\r\nimport { PaintWrapper, StyledCanvas, ButtonWrapper } from './styles';\r\nimport ControlPanel from './components/ControlPanel';\r\n\r\ninterface Position {\r\n    offsetX: number,\r\n    offsetY: number\r\n}\r\n\r\nconst Paint: React.FC = () => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const [ctx, setCtx] = useState<CanvasRenderingContext2D | null>();\r\n  const [isPainting, setIsPainting] = useState<boolean>(false);\r\n  const [prevPos, setPrevPosition] = useState<Position>({ offsetX: 0, offsetY: 0 });\r\n  const [snapshot, setSnapshot] = useState<ImageData>();\r\n  const [color, setColor] = useState('black');\r\n  const [instrument, setInstrument] = useState('0');\r\n  const [lineWidth, setLineWidth] = useState('1');\r\n  const [canvasSize, setCanvasSize] = useState(500);\r\n\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { username, isLoggedIn, uid } = useSelector(getUserData);\r\n\r\n  useEffect(() => {\r\n    if (!isLoggedIn) history.push(LINKS.LOGIN);\r\n  }, [isLoggedIn]);\r\n\r\n  useLayoutEffect(() => {\r\n    window.onresize = (() => {\r\n      setCanvasSize(window.outerWidth < 500 ? window.outerWidth * 0.95 : 500);\r\n    });\r\n    if (canvasRef && canvasRef.current) {\r\n      setCtx(canvasRef.current.getContext('2d'));\r\n    }\r\n    return () => {\r\n      window.onresize = null;\r\n    };\r\n  }, []);\r\n\r\n  const loadSnapshot = useCallback(() => {\r\n    if (snapshot) { ctx?.putImageData(snapshot, 0, 0); }\r\n  }, [snapshot]);\r\n\r\n  const handleMouseDown = ({ nativeEvent } : SyntheticEvent) => {\r\n    if (nativeEvent instanceof TouchEvent && canvasRef.current) {\r\n      const touch = nativeEvent as TouchEvent;\r\n      const { pageX, pageY } = touch.touches[0];\r\n      setPrevPosition({\r\n        offsetX: pageX - canvasRef.current.offsetLeft,\r\n        offsetY: pageY - canvasRef.current.offsetTop,\r\n      });\r\n    } else {\r\n      const { offsetX, offsetY } = nativeEvent as MouseEvent;\r\n      setPrevPosition({ offsetX, offsetY });\r\n    }\r\n\r\n    loadSnapshot();\r\n    setIsPainting(true);\r\n  };\r\n\r\n  const paint = (currPosition : Position) => {\r\n    const { offsetX, offsetY } = currPosition;\r\n    const { offsetX: x, offsetY: y } = prevPos;\r\n    if (ctx && canvasRef.current) {\r\n      const deltaX = x - offsetX;\r\n      const deltaY = y - offsetY;\r\n      const radius = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\r\n      ctx.strokeStyle = color;\r\n      ctx.lineCap = 'round';\r\n      ctx.lineWidth = parseInt(lineWidth, 10);\r\n      ctx.beginPath();\r\n      switch (instrument) {\r\n        case '0':\r\n          ctx.moveTo(x, y);\r\n          ctx.lineTo(offsetX, offsetY);\r\n          setPrevPosition({ offsetX, offsetY });\r\n          break;\r\n        case '1':\r\n          ctx.clearRect(0, 0, canvasRef.current.width,\r\n            canvasRef.current.height);\r\n          loadSnapshot();\r\n          ctx.moveTo(x, y);\r\n          ctx.lineTo(offsetX, offsetY);\r\n          break;\r\n        case '2':\r\n          ctx.clearRect(0, 0, canvasRef.current.width,\r\n            canvasRef.current.height);\r\n          loadSnapshot();\r\n          ctx.rect(\r\n            x,\r\n            y,\r\n            offsetX - x,\r\n            offsetY - y,\r\n          );\r\n          break;\r\n        case '3':\r\n          ctx.clearRect(0, 0, canvasRef.current.width,\r\n            canvasRef.current.height);\r\n          loadSnapshot();\r\n\r\n          ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n          break;\r\n        default:\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = ({ nativeEvent } : SyntheticEvent) => {\r\n    if (isPainting) {\r\n      let currPos: Position;\r\n      if (nativeEvent instanceof TouchEvent && canvasRef.current) {\r\n        const touch = nativeEvent as TouchEvent;\r\n        const { pageX, pageY } = touch.touches[0];\r\n        currPos = ({\r\n          offsetX: pageX - canvasRef.current.offsetLeft,\r\n          offsetY: pageY - canvasRef.current.offsetTop,\r\n        });\r\n      } else {\r\n        const { offsetX, offsetY } = nativeEvent as MouseEvent;\r\n        currPos = ({ offsetX, offsetY });\r\n      }\r\n      paint(currPos);\r\n    }\r\n  };\r\n\r\n  const endPainting = () => {\r\n    setIsPainting(false);\r\n    if (ctx && canvasRef.current) {\r\n      setSnapshot(ctx.getImageData(\r\n        0,\r\n        0,\r\n        canvasRef.current.width,\r\n        canvasRef.current.height,\r\n      ));\r\n    }\r\n  };\r\n\r\n  const handleClear = () => {\r\n    if (ctx && canvasRef && canvasRef.current) {\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const data = canvasRef.current?.toDataURL();\r\n    if (data) {\r\n      dispatch(savePost({ img: data, uid, username }));\r\n      history.push(LINKS.HOME);\r\n    }\r\n  };\r\n\r\n  const handleLineWidthPick = useCallback((e) => {\r\n    setLineWidth((e.target as HTMLInputElement).value);\r\n  }, []);\r\n  const handleInstrumentPick = useCallback((e) => { setInstrument(e.currentTarget.id); }, []);\r\n  const handleColorPick = useCallback((e) => { setColor(e.currentTarget.id); }, []);\r\n\r\n  return (\r\n    <PaintWrapper isPainting={isPainting}>\r\n      <span>Draw here</span>\r\n      <StyledCanvas\r\n        ref={canvasRef}\r\n        onMouseMove={handleMouseMove}\r\n        onTouchStart={handleMouseDown}\r\n        onTouchMove={handleMouseMove}\r\n        onTouchEnd={endPainting}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseLeave={endPainting}\r\n        onMouseUp={endPainting}\r\n        id=\"canvas\"\r\n        width={canvasSize}\r\n        height={canvasSize}\r\n      />\r\n      <ControlPanel\r\n        pickedColor={color}\r\n        pickedInstrument={instrument}\r\n        handleLineWidthPick={handleLineWidthPick}\r\n        handleColorPick={handleColorPick}\r\n        handleInstrumentPick={handleInstrumentPick}\r\n      />\r\n      <ButtonWrapper>\r\n        <ButtonLink to=\"/home\">Go back</ButtonLink>\r\n        <Button isDanger onClick={handleClear}>Clear canvas</Button>\r\n        <Button onClick={handleSave}>Save your drawing</Button>\r\n      </ButtonWrapper>\r\n    </PaintWrapper>\r\n  );\r\n};\r\n\r\nexport default Paint;\r\n","export default __webpack_public_path__ + \"static/media/loader.9c4c2b52.gif\";","import styled from 'styled-components';\r\nimport loader from 'core/assets/loader.gif';\r\n\r\nconst Loader = styled.img.attrs({ src: loader })`\r\n    position: absolute;\r\n    top: calc(50% - 32px);\r\n    left: calc(50% - 32px);\r\n`;\r\n\r\nexport default Loader;\r\n","import FirebaseGate from './FirebaseGate';\r\n\r\nexport default FirebaseGate;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { signInCheckResult } from 'redux/slices/UserSlice';\r\nimport { auth } from 'core/api/firebase';\r\nimport Loader from 'core/components/styled/Loader';\r\n\r\nconst FirebaseGate = ({ children }:{ children:JSX.Element }):JSX.Element => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        dispatch(signInCheckResult(user.uid));\r\n      } else {\r\n        dispatch(signInCheckResult());\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  const { isPending } = useSelector(getUserData);\r\n\r\n  if (isPending) {\r\n    return <Loader />;\r\n  }\r\n  return children;\r\n};\r\n\r\nexport default FirebaseGate;\r\n","import {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\nimport React from 'react';\nimport LoginPage from 'core/pages/Login';\nimport RegisterPage from 'core/pages/Register';\nimport HomePage from 'core/pages/HomePage';\nimport Paint from 'core/pages/Paint';\nimport LINKS from 'core/utils/constants/links';\nimport FirebaseGate from 'core/utils/FirebaseGate';\n\nconst App: React.FC = () => (\n  <FirebaseGate>\n    <Router>\n      <Switch>\n        <Redirect from={LINKS.ROOT} to={LINKS.HOME} exact />\n        <Route path={LINKS.LOGIN}>\n          <LoginPage />\n        </Route>\n        <Route path={LINKS.REGISTER}>\n          <RegisterPage />\n        </Route>\n        <Route component={HomePage} path={LINKS.HOME} />\n        <Route component={Paint} path={LINKS.PAINT} />\n      </Switch>\n    </Router>\n  </FirebaseGate>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './app/store';\nimport GlobalStyles from './globalStyles';\nimport App from './app/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyles />\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}