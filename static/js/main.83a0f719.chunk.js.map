{"version":3,"sources":["core/api/firebase.ts","core/services/firebaseDBQueries.ts","core/services/firebaseStorageQueries.ts","redux/slices/PostFeedSlice.ts","core/utils/constants/errors.ts","core/services/firebaseAuthQueries.ts","redux/slices/UserSlice.ts","app/rootReducer.ts","app/store.ts","globalStyles.ts","core/components/styled/TextInput.ts","core/components/styled/Button.ts","core/services/showToast.ts","core/utils/constants/links.ts","redux/selectors/UserSelector.ts","core/pages/Login/styles.ts","core/pages/Login/index.ts","core/pages/Login/Login.tsx","core/pages/Register/styles.ts","core/pages/Register/index.ts","core/pages/Register/Register.tsx","core/components/styled/Link.ts","core/pages/HomePage/styles.ts","redux/selectors/PostFeedSelector.ts","core/pages/HomePage/components/PostsFeed/styles.ts","core/pages/HomePage/components/PostsFeed/index.ts","core/pages/HomePage/components/PostsFeed/PostsFeed.tsx","core/pages/HomePage/index.ts","core/pages/HomePage/HomePage.tsx","core/pages/Paint/styles.ts","core/pages/Paint/components/ControlPanel/colors.ts","core/pages/Paint/components/ControlPanel/instruments.ts","core/assets/brush.png","core/assets/line.png","core/assets/rect.png","core/assets/circle.png","core/pages/Paint/components/ControlPanel/styles.ts","core/pages/Paint/components/ControlPanel/index.ts","core/pages/Paint/components/ControlPanel/ControlPanel.tsx","core/pages/Paint/index.ts","core/pages/Paint/Paint.tsx","app/App.tsx","index.tsx"],"names":["process","REACT_APP_FIREBASE_API_KEY","REACT_APP_AUTH_DOMAIN","REACT_APP_DATABASE_URL","firebaseConfig","apiKey","authDomain","projectId","REACT_APP_PROJECT_ID","storageBucket","REACT_APP_STORAGE_BUCKET","messagingSenderId","REACT_APP_MESSAGING_SENDER_ID","appId","REACT_APP_APP_ID","databaseURL","firebaseApp","firebase","initializeApp","database","auth","storage","createUser","uid","username","a","tasksRef","ref","newUser","update","then","getPosts","route","postsRef","get","snapshot","console","log","exists","val","addNewPost","newPost","push","getUsername","saveImage","data","child","v4","putString","metadata","fullPath","catch","error","getImage","path","getDownloadURL","url","fetchPosts","createAsyncThunk","res","savePost","img","imgPath","imgURL","author","date","Date","now","toString","PostsFeedSlice","createSlice","name","initialState","reducers","extraReducers","fulfilled","state","action","Object","entries","payload","map","postsFeed","rejected","ERROR_MESSAGES","default","loginUser","email","password","signInWithEmailAndPassword","userCredential","user","code","registerUser","createUserWithEmailAndPassword","logoutUser","signOut","signUp","registerRes","signIn","loginRes","usernameRes","logOut","userSlice","isLoggedIn","isError","errorMessage","clearState","message","actions","rootReducer","combineReducers","postsFeedReducer","userData","userReducer","store","configureStore","reducer","GlobalStyles","createGlobalStyle","TextInput","styled","input","Button","button","props","isDanger","showErrorToast","text","toast","position","POSITION","TOP_CENTER","autoClose","ToastContainer","LINKS","ROOT","HOME","LOGIN","REGISTER","PAINT","getUserData","LoginWrapper","div","LoginContainer","LoginPage","useState","setEmail","setPassword","useSelector","dispatch","useDispatch","history","useHistory","handleLogin","useEffect","onChange","e","target","value","type","placeholder","onClick","to","RegisterWrapper","RegisterContainer","RegisterPage","passwordComfirm","setPasswordConfirm","setUsername","handleSignUp","ButtonLink","Link","PaintListWrapper","ButtonWrapper","FeedWrapper","PostItem","PostsFeed","filter","setFilter","posts","postItems","useMemo","slice","toLowerCase","includes","sort","b","compareDesc","post","src","alt","formatDistance","HomePage","handleLogOut","StyledCanvas","canvas","PaintWrapper","colors","instruments","ControlPanelWrapper","ColorPickerContainer","InstrumentPickerContainer","Instrument","isPicked","ColorPickerItem","color","LineWidthSlider","ControlPanel","React","memo","handleColorPick","handleLineWidthPick","handleInstrumentPick","pickedInstrument","pickedColor","id","index","defaultValue","min","max","step","Paint","canvasRef","useRef","ctx","setCtx","isPainting","setIsPainting","offsetX","offsetY","prevPos","setPrevPosition","setSnapshot","setColor","instrument","setInstrument","lineWidth","setLineWidth","useLayoutEffect","current","getContext","loadSnapshot","useCallback","putImageData","handleMouseDown","nativeEvent","preventDefault","TouchEvent","touch","touches","pageX","pageY","offsetLeft","offsetTop","handleMouseMove","currPos","currPosition","x","y","deltaX","deltaY","radius","Math","sqrt","strokeStyle","lineCap","parseInt","beginPath","moveTo","lineTo","clearRect","width","height","rect","arc","PI","stroke","paint","endPainting","getImageData","handleSave","toDataURL","currentTarget","onMouseMove","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseLeave","onMouseUp","window","outerWidth","App","from","exact","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"ySAUIA,olBAPFC,E,EAAAA,2BACAC,E,EAAAA,sBACAC,E,EAAAA,uBAOIC,EAAiB,CACrBC,OAAQJ,EACRK,WAAYJ,EACZK,U,EATAC,qBAUAC,c,EATAC,yBAUAC,kB,EATAC,8BAUAC,M,EATAC,iBAUAC,YAAaZ,GAGTa,EAAcC,IAASC,cAAcd,GAErCe,EAAWH,EAAYG,WACvBC,EAAOJ,EAAYI,OACnBC,EAAUL,EAAYK,UCnBfC,EAAU,uCAAG,WAAOC,EAAYC,GAAnB,iBAAAC,EAAA,6DAClBC,EAAWP,EAASQ,IAAT,gBAAsBJ,KACjCK,EAAU,CAAEJ,SAAU,KACpBA,SAAWA,EAHK,kBAIjBE,EAASG,OAAOD,GAASE,MAAK,kBAAM,MAJnB,2CAAH,wDAOVC,EAAQ,uCAAG,WAAOC,GAAP,eAAAP,EAAA,6DAChBQ,EAAWd,EAASQ,IAAIK,GADR,kBAEfC,EAASC,MAAMJ,MAAK,SAACK,GAE1B,GADAC,QAAQC,IAAIF,GACRA,EAASG,SACX,OAAOH,EAASI,MAGlB,KADgB,wBAPI,2CAAH,sDAYRC,EAAU,uCAAG,WAAOC,EAAcT,GAArB,eAAAP,EAAA,6DAClBQ,EAAWd,EAASQ,IAAIK,GADN,kBAEjBC,EAASS,KAAKD,GAASX,MAAK,kBAAM,MAFjB,2CAAH,wDAKVa,EAAW,uCAAG,WAAOpB,GAAP,eAAAE,EAAA,6DACnBQ,EAAWd,EAASQ,IAAT,gBAAsBJ,EAAtB,cADQ,kBAElBU,EAASC,MAAMJ,MAAK,SAACK,GAE1B,GADAC,QAAQC,IAAIF,GACRA,EAASG,SACX,OAAOH,EAASI,MAGlB,KADgB,wBAPO,2CAAH,sD,QC5BXK,EAAS,uCAAG,WAAOC,EAAatB,GAApB,SAAAE,EAAA,+EAAmDJ,EAAQM,MACjFmB,MADyE,iBACzDvB,EADyD,YAClDwB,cADkD,SAEzEC,UAAUH,EAAM,YAChBf,MAAK,SAACK,GAAsC,OAAvBC,QAAQC,IAAIF,GAAkBA,EAASc,SAASC,YACrEC,OAAM,SAACC,GACN,MAAMA,MALe,2CAAH,wDAQTC,EAAQ,uCAAG,WAAOC,GAAP,SAAA7B,EAAA,+EACtBJ,EAAQM,MAAMmB,MAAMQ,GAAMC,iBAAiBzB,MAAK,SAAC0B,GAAD,OAASA,KACtDL,OAAM,SAACC,GACN,MAAMA,MAHY,2CAAH,sDCNRK,GAAaC,YAAiB,uBAAD,sBAAyB,4BAAAjC,EAAA,sEAC/CM,EAAS,SADsC,cAC3D4B,EAD2D,yBAE1DA,GAF0D,4CAKtDC,GAAWF,YAAiB,qBAAD,uCACtC,uCAAAjC,EAAA,6DAASoC,EAAT,EAASA,IAAKtC,EAAd,EAAcA,IAAKC,EAAnB,EAAmBA,SAAnB,SACwBoB,EAAUiB,EAAKtC,GADvC,cACQuC,EADR,gBAEuBT,EAASS,GAFhC,cAEQC,EAFR,OAGQtB,EAAU,CAAEa,KAAMS,EAAQC,OAAQxC,EAAUyC,KAAM,IAAIC,KAAKA,KAAKC,OAAOC,YAH/E,UAIQ5B,EAAWC,EAAS,SAJ5B,4CADsC,uDA2BzB4B,GAnBeC,YAAY,CACxCC,KAAM,YACNC,aAAc,GACdC,SAAU,GAKVC,eAAa,mBACVjB,GAAWkB,UAAUP,YAAa,SAACQ,EAAOC,GAAR,OACjCC,OAAOC,QAAQF,EAAOG,SAASC,KAAI,SAACC,GAAD,OAAeA,EAAU,SAFnD,cAIVzB,GAAW0B,SAASf,YAAa,SAACQ,EAAOC,GAExCzC,QAAQC,IAAIwC,MANH,KAWf,Q,SC3BeO,GAVgC,CAC7C,qBAAsB,2BACtB,sBAAuB,iCACvB,sBAAuB,4BACvB,qBACI,2DACJ,4BAA6B,8BAC7BC,QAAS,2BCJEC,GAAS,uCAAG,WAAOC,EAAcC,GAArB,SAAA/D,EAAA,+EAAyDL,EAC/EqE,2BAA2BF,EAAOC,GAClC1D,MAAK,SAAC4D,GACL,OAAIA,EAAeC,KAAaD,EAAeC,KAAKpE,IAC7C,MAER4B,OAAM,SAACC,GAIN,MAHgBgC,GAAehC,EAAMwC,MACjCR,GAAehC,EAAMwC,MACrBR,GAAeC,YATE,2CAAH,wDAaTQ,GAAY,uCAAG,WAAON,EAAcC,GAArB,SAAA/D,EAAA,+EAA2DL,EACpF0E,+BAA+BP,EAAOC,GACtC1D,MAAK,SAAC4D,GACL,OAAIA,EAAeC,KAAaD,EAAeC,KAAKpE,IAC7C,MAER4B,OAAM,SAACC,GAIN,MAHgBgC,GAAehC,EAAMwC,MACjCR,GAAehC,EAAMwC,MACrBR,GAAeC,YATK,2CAAH,wDAaZU,GAAU,uCAAG,sBAAAtE,EAAA,+EAA2BL,EAAK4E,WAAhC,2CAAH,qDCtBVC,GAASvC,YAAiB,cAAD,uCACpC,mCAAAjC,EAAA,6DAAS8D,EAAT,EAASA,MAAOC,EAAhB,EAAgBA,SAAUhE,EAA1B,EAA0BA,SAA1B,SAC4BqE,GAAaN,EAAOC,GADhD,cACQU,EADR,gBAEQ5E,EAAW4E,EAAa1E,GAFhC,gCAGS,CAAED,IAAK2E,EAAa1E,aAH7B,2CADoC,uDAOzB2E,GAASzC,YAAiB,cAAD,uCACpC,mCAAAjC,EAAA,6DAAS8D,EAAT,EAASA,MAAOC,EAAhB,EAAgBA,SAAhB,SACyBF,GAAUC,EAAOC,GAD1C,cACQY,EADR,gBAE4BzD,EAAYyD,GAFxC,cAEQC,EAFR,yBAGS,CAAE9E,IAAK6E,EAAU5E,SAAU6E,IAHpC,2CADoC,uDAOzBC,GAAS5C,YAAiB,cAAD,sBAAgB,sBAAAjC,EAAA,sEAC9CsE,KAD8C,4CAIzCQ,GAAYjC,YAAY,CACnCC,KAAM,OACNC,aAAc,CACZjD,IAAK,GAAIC,SAAU,GAAIgF,YAAY,EAAOC,SAAS,EAAOC,aAAc,IAE1EjC,SAAU,CACRkC,WADQ,SACG/B,GACT,OAAO,6BAAKA,GAAZ,IAAmB6B,SAAS,MAGhC/B,eAAa,mBACVyB,GAAOxB,UAAUP,YAAa,SAACQ,EAAOC,GAAR,oBAAC,gBAC3BD,GAD0B,IACnBrD,IAAKsD,EAAOG,QAAQzD,IAAKC,SAAUqD,EAAOG,QAAQxD,SAAUgF,YAAY,OAFzE,cAIVL,GAAOhB,SAASf,YAAa,SAACQ,EAAOC,GAAR,oBAAC,gBAC1BD,GADyB,IAClB6B,SAAS,EAAMC,aAAc7B,EAAOzB,MAAMwD,aAL3C,cAOVX,GAAOtB,UAAUP,YAAa,SAACQ,EAAOC,GAAR,oBAAC,gBAC3BD,GAD0B,IACnBrD,IAAKsD,EAAOG,QAAQzD,IAAKC,SAAUqD,EAAOG,QAAQxD,SAAUgF,YAAY,OARzE,cAUVP,GAAOd,SAASf,YAAa,SAACQ,EAAOC,GAAR,oBAAC,gBAC1BD,GADyB,IAClB6B,SAAS,EAAMC,aAAc7B,EAAOzB,MAAMwD,aAX3C,cAaVN,GAAO3B,UAAUP,YAAa,SAACQ,GAAD,oBAAC,gBAC3BA,GAD0B,IACnB4B,YAAY,OAdb,KAmBAG,GAAeJ,GAAUM,QAAzBF,WAEAJ,MAAf,QC9CeO,GANKC,YAAgB,CAClC7B,UAAW8B,GACXC,SAAUC,KCIGC,GANDC,YAAe,CAC3BC,QAASP,K,gBCaIQ,GAhBMC,aAAH,gb,2BCSHC,GATGC,KAAOC,MAAV,+JCaAC,GAbAF,KAAOG,OAAV,4NAIS,SAACC,GAAD,OAAYA,EAAMC,SAAW,MAAQ,Y,SCH7CC,I,MAAiB,SAACC,GAC7BC,KAAM7E,MAAM4E,EAAM,CAChBE,SAAUD,KAAME,SAASC,WACzBC,UAAW,SAWAC,MAAf,ECTeC,GARuB,CACpCC,KAAM,IACNC,KAAM,QACNC,MAAO,SACPC,SAAU,YACVC,MAAO,UCAMC,GAFK,SAACjE,GAAD,OAAgCA,EAAMqC,UCD7C6B,GAAerB,KAAOsB,IAAV,sTAgBZC,GAAiBvB,KAAOsB,IAAV,2N,QChBZE,GCUa,WAAO,IAAD,EACNC,mBAAS,IADH,oBACzB3D,EADyB,KAClB4D,EADkB,OAEAD,mBAAS,IAFT,oBAEzB1D,EAFyB,KAEf4D,EAFe,OAIcC,YAAYR,IAAlDrC,EAJwB,EAIxBA,WAAYC,EAJY,EAIZA,QAASC,EAJG,EAIHA,aACvB4C,EAAWC,cAEXC,EAAUC,eAEVC,EAAW,uCAAG,sBAAAjI,EAAA,yDACJ,KAAV8D,GAA6B,KAAbC,EADF,uBAEhBuC,GAAe,0BAFC,0BAMlBuB,EAASnD,GAAO,CAAEZ,QAAOC,cANP,2CAAH,qDAsBjB,OAZAmE,qBAAU,WACJnD,IACF8C,EAAS3C,MACT6C,EAAQ9G,KAAK6F,GAAME,OAGjBhC,IACFsB,GAAerB,GACf4C,EAAS3C,SAEV,CAACH,EAAYC,IAGd,gBAACqC,GAAD,WACE,+CACA,gBAACE,GAAD,WACE,iDACA,eAAC,GAAD,CACEY,SAAU,SAACC,GAAD,OAAOV,EAAUU,EAAEC,OAA4BC,QACzDA,MAAOxE,EACPyE,KAAK,OACLC,YAAY,WAEd,eAAC,GAAD,CACEL,SAAU,SAACC,GAAD,OAAOT,EAAaS,EAAEC,OAA4BC,QAC5DA,MAAOvE,EACPwE,KAAK,WACLC,YAAY,aAEd,eAAC,GAAD,CAAQC,QAASR,EAAjB,qBACA,eAAC,KAAD,CAAMS,GAAG,YAAT,oDAEF,eAAC,GAAD,QC7DOC,GAAkB3C,KAAOsB,IAAV,sTAgBfsB,GAAoB5C,KAAOsB,IAAV,2NChBfuB,GCSgB,WAAO,IAAD,EACTpB,mBAAS,IADA,oBAC5B3D,EAD4B,KACrB4D,EADqB,OAEHD,mBAAS,IAFN,oBAE5B1D,EAF4B,KAElB4D,EAFkB,OAGWF,mBAAS,IAHpB,oBAG5BqB,EAH4B,KAGXC,EAHW,OAIHtB,mBAAS,IAJN,oBAI5B1H,EAJ4B,KAIlBiJ,EAJkB,KAM7BjB,EAAUC,eAEVH,EAAWC,cARkB,EASWF,YAAYR,IAAlDpC,EAT2B,EAS3BA,QAASD,EATkB,EASlBA,WAAYE,EATM,EASNA,aAEvBgE,EAAY,uCAAG,sBAAAjJ,EAAA,yDAEP,KAAV8D,GACgB,KAAb/D,GACa,KAAbgE,GACoB,KAApB+E,EALc,uBAOjBxC,GAAe,0BAPE,6BAUfvC,IAAa+E,EAVE,uBAWjBxC,GAAe,0BAXE,0BAenBuB,EAASrD,GAAO,CAAEV,QAAOC,WAAUhE,cAfhB,2CAAH,qDA6BlB,OAXAmI,qBAAU,WACJnD,IACF8C,EAAS3C,MACT6C,EAAQ9G,KAAK6F,GAAME,OAEjBhC,IACF6C,EAAS3C,MACToB,GAAerB,OAKjB,gBAAC0D,GAAD,WACE,+CACA,gBAACC,GAAD,WACE,oDACA,eAAC,GAAD,CACET,SAAU,SAACC,GAAD,OAAOV,EAAUU,EAAEC,OAA4BC,QACzDA,MAAOxE,EACPyE,KAAK,OACLC,YAAY,WAEd,eAAC,GAAD,CACEL,SAAU,SAACC,GAAD,OAAOY,EAAaZ,EAAEC,OAA4BC,QAC5DA,MAAOvI,EACPwI,KAAK,OACLC,YAAY,aAEd,eAAC,GAAD,CACEL,SAAU,SAACC,GAAD,OAAOT,EAAaS,EAAEC,OAA4BC,QAC5DA,MAAOvE,EACPwE,KAAK,WACLC,YAAY,aAEd,eAAC,GAAD,CACEL,SAAU,SAACC,GAAD,OAAOW,EAAoBX,EAAEC,OAA4BC,QACnEA,MAAOQ,EACPP,KAAK,WACLC,YAAY,qBAEd,eAAC,GAAD,CAAQC,QAASQ,EAAjB,qBACA,eAAC,KAAD,CAAMP,GAAG,SAAT,uDAEF,eAAC,GAAD,QChESQ,GAhBIlD,aAAOmD,KAAPnD,CAAH,4SCDHoD,GAAmBpD,KAAOsB,IAAV,kHAOhB+B,GAAgBrD,KAAOsB,IAAV,sICJXhH,GAFE,SAAC6C,GAAD,OAA8BA,EAAMM,W,kBCDxC6F,GAActD,KAAOsB,IAAV,6HAOXiC,GAAWvD,KAAOsB,IAAV,gYCPNkC,GCKG,WAAoB,IAAD,EACP/B,mBAAS,IADF,oBAC5BgC,EAD4B,KACpBC,EADoB,KAE7BC,EAAQ/B,YAAYtH,IACpBsJ,EAAYC,mBAChB,WAGE,OAFiC,KAAXJ,EAAgBE,EAAMG,QACxCH,EAAMF,QAAO,SAACnB,GAAD,OAAWA,EAAM/F,OAAOwH,cAAcC,SAASP,EAAOM,mBAClDE,MAAK,SAACjK,EAAGkK,GAAJ,OAAUC,aAAY,IAAI1H,KAAKzC,EAAEwC,MAAO,IAAIC,KAAKyH,EAAE1H,UAC1EgB,KAAI,SAAC4G,GAAD,OACH,gBAACb,GAAD,WACE,sBAAKc,IAAKD,EAAKvI,KAAMyI,IAAI,KACzB,iCACE,4CAEG,IACAF,EAAK7H,UAER,0CAEG,IACAgI,aAAe,IAAI9H,KAAKA,KAAKC,OAAQ,IAAID,KAAK2H,EAAK5H,OACnD,IAJH,oBAWV,CAACmH,EAAOF,IAEV,OACE,uCACE,eAAC,GAAD,CACEtB,SAAU,SAACC,GAAD,OAAOsB,EAAWtB,EAAEC,OAA4BC,QAC1DA,MAAOmB,EACPlB,KAAK,OACLC,YAAY,mBAEd,eAACc,GAAD,UAAcM,QC3CLY,GCWW,WACxB,IAAMzC,EAAUC,eAERjD,EAAe6C,YAAYR,IAA3BrC,WAEF8C,EAAWC,cAEjBI,qBAAU,WACJnD,EACF8C,EAAS7F,MAET+F,EAAQ9G,KAAK6F,GAAMG,SAEpB,CAAClC,IAEJ,IAAM0F,EAAY,uCAAG,sBAAAzK,EAAA,sDACnB6H,EAAShD,MADU,2CAAH,qDAIlB,OACE,gBAACuE,GAAD,WACE,gBAACC,GAAD,WACE,eAAC,GAAD,CAAYX,GAAI5B,GAAMK,MAAtB,4BACA,eAAC,GAAD,CAAQsB,QAASgC,EAAjB,wBAEF,eAAC,GAAD,QCpCOC,GAAe1E,KAAO2E,OAAV,2DAIZC,GAAe5E,KAAOsB,IAAV,mPAYZ+B,GAAgBrD,KAAOsB,IAAV,mRCHXuD,GAfA,CACb,QACA,MACA,QACA,OACA,SACA,SACA,OACA,OACA,QACA,SACA,SACA,OACA,QCNaC,GAFK,CCLL,qgECAA,6uBCAA,iVCAA,khCCEFC,GAAsB/E,KAAOsB,IAAV,4MAUnB0D,GAAuBhF,KAAOsB,IAAV,yIAQpB2D,GAA4BjF,KAAOsB,IAAV,8IAQzB4D,GAAalF,KAAO5D,IAAV,8FAIjB,SAACgE,GAAD,OAAYA,EAAM+E,SAAW,4BAA8B,MAGpDC,GAAkBpF,KAAOsB,IAAV,mJAKJ,SAAClB,GAAD,OAAWA,EAAMiF,SACnC,SAACjF,GAAD,OAAYA,EAAM+E,SAAW,eAAiB,MAGvCG,GAAkBtF,KAAOC,MAAV,sFC1CbsF,GCkBMC,IAAMC,MAAK,SAACrF,GAA2C,IAExEsF,EACEtF,EADFsF,gBAAiBC,EACfvF,EADeuF,oBAAqBC,EACpCxF,EADoCwF,qBAAsBC,EAC1DzF,EAD0DyF,iBAAkBC,EAC5E1F,EAD4E0F,YAEhF,OACE,gBAACf,GAAD,WACE,4CACA,eAACC,GAAD,UACGH,GAAOrH,KAAI,SAAC8E,GAAD,OACV,eAAC8C,GAAD,CACED,SAAU7C,IAAUwD,EACpBC,GAAIzD,EACJG,QAASiD,EACTL,MAAO/C,SAIb,2CACA,eAAC2C,GAAD,UACGH,GAAYtH,KAAI,SAAC8E,EAAO0D,GAAR,OACf,eAACd,GAAD,CACEC,SAAUa,EAAMrJ,aAAekJ,EAC/BxB,IAAK/B,EACLyD,GAAIC,EAAMrJ,WACV8F,QAASmD,SAIf,+CACA,eAACN,GAAD,CACEW,aAAc,EACdC,IAAK,EACLC,IAAK,GACLC,KAAM,EACN7D,KAAK,QACLJ,SAAUwD,UCrDHU,GCgBS,WACtB,IAAMC,EAAYC,iBAA0B,MADhB,EAGN9E,qBAHM,oBAGrB+E,EAHqB,KAGhBC,EAHgB,OAIQhF,oBAAkB,GAJ1B,oBAIrBiF,EAJqB,KAITC,EAJS,OAKOlF,mBAAmB,CAAEmF,QAAS,EAAGC,QAAS,IALjD,oBAKrBC,EALqB,KAKZC,EALY,OAMItF,qBANJ,oBAMrB/G,EANqB,KAMXsM,EANW,OAOFvF,mBAAS,SAPP,oBAOrB4D,EAPqB,KAOd4B,EAPc,OAQQxF,mBAAS,KARjB,oBAQrByF,EARqB,KAQTC,EARS,OASM1F,mBAAS,KATf,oBASrB2F,EATqB,KASVC,EATU,KAWtBtF,EAAUC,eAEVH,EAAWC,cAbW,EAeUF,YAAYR,IAA1CrH,EAfoB,EAepBA,SAAUgF,EAfU,EAeVA,WAAYjF,EAfF,EAeEA,IAE9BoI,qBAAU,WACHnD,GAAYgD,EAAQ9G,KAAK6F,GAAMG,SACnC,CAAClC,IAEJuI,2BAAgB,WACVhB,GAAaA,EAAUiB,SACzBd,EAAOH,EAAUiB,QAAQC,WAAW,SAErC,IAEH,IAAMC,EAAeC,uBAAY,WAC/B/M,QAAQC,IAAIF,GACRA,IAAe,OAAH8L,QAAG,IAAHA,KAAKmB,aAAajN,EAAU,EAAG,MAC9C,CAACA,IAEEkN,EAAkB,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,YAEzB,GADAA,EAAYC,iBACRD,aAAuBE,WAAY,CACrC,IAAMC,EAAQH,EADuB,EAEZG,EAAMC,QAAQ,GAA/BC,EAF6B,EAE7BA,MAAOC,EAFsB,EAEtBA,MACfxN,QAAQC,IAAIoN,EAAMC,QAAQ,IAC1BlB,EAAgB,CACdH,QAASsB,EAAQ5B,EAAUiB,QAASa,WACpCvB,QAASsB,EAAQ7B,EAAUiB,QAASc,gBAEjC,CAAC,IAAD,EACwBR,EAArBjB,EADH,EACGA,QAASC,EADZ,EACYA,QACjBE,EAAgB,CAAEH,UAASC,YAG7BY,IACAd,GAAc,IAoDV2B,EAAkB,SAAC,GAAsC,IAApCT,EAAmC,EAAnCA,YACzB,GAAInB,EAAY,CACd,IAAI6B,EACJ,GAAIV,aAAuBE,WAAY,CACrC,IADqC,EACvBF,EACiBI,QAAQ,GAA/BC,EAF6B,EAE7BA,MAAOC,EAFsB,EAEtBA,MACfI,EAAW,CACT3B,QAASsB,EAAQ5B,EAAUiB,QAASa,WACpCvB,QAASsB,EAAQ7B,EAAUiB,QAASc,eAEjC,CAAC,IAAD,EACwBR,EAC7BU,EAAW,CAAE3B,QAFR,EACGA,QACcC,QAFjB,EACYA,UA5DT,SAAC2B,GAA6B,IAClC5B,EAAqB4B,EAArB5B,QAASC,EAAY2B,EAAZ3B,QACA4B,EAAkB3B,EAA3BF,QAAqB8B,EAAM5B,EAAfD,QAEpB,GADAlM,QAAQC,IAAIkM,EAAS0B,GACjBhC,EAAK,CACP,IAAMmC,EAASF,EAAI7B,EACbgC,EAASF,EAAI7B,EACbgC,EAASC,KAAKC,KAAKJ,EAASA,EAASC,EAASA,GAKpD,OAJApC,EAAIwC,YAAc3D,EAClBmB,EAAIyC,QAAU,QACdzC,EAAIY,UAAY8B,SAAS9B,EAAW,IACpCZ,EAAI2C,YACIjC,GACN,IAAK,IACHV,EAAI4C,OAAOX,EAAGC,GACdlC,EAAI6C,OAAOzC,EAASC,GACpBE,EAAgB,CAAEH,UAASC,YAC3B,MACF,IAAK,IACHL,EAAI8C,UAAU,EAAG,EAAGhD,EAAUiB,QAASgC,MACrCjD,EAAUiB,QAASiC,QACrB/B,IACAjB,EAAI4C,OAAOX,EAAGC,GACdlC,EAAI6C,OAAOzC,EAASC,GACpB,MACF,IAAK,IACHL,EAAI8C,UAAU,EAAG,EAAGhD,EAAUiB,QAASgC,MACrCjD,EAAUiB,QAASiC,QACrB/B,IACAjB,EAAIiD,KACFhB,EACAC,EACA9B,EAAU6B,EACV5B,EAAU6B,GAEZ,MACF,IAAK,IACHlC,EAAI8C,UAAU,EAAG,EAAGhD,EAAUiB,QAASgC,MACrCjD,EAAUiB,QAASiC,QACrB/B,IAEAjB,EAAIkD,IAAIjB,EAAGC,EAAGG,EAAQ,EAAa,EAAVC,KAAKa,IAIlCnD,EAAIoD,UAkBJC,CAAMtB,KAIJuB,EAAc,WAClBnD,GAAc,GACdK,EAAYR,EAAKuD,aAAa,EAAG,EAAGzD,EAAUiB,QAASgC,MAAOjD,EAAUiB,QAASiC,UAS7EQ,EAAU,uCAAG,8BAAAhQ,EAAA,uDACXoB,EADW,UACJkL,EAAUiB,eADN,aACJ,EAAmB0C,eAE9BpI,EAAS1F,GAAS,CAAEC,IAAKhB,EAAMtB,MAAKC,cACpCgI,EAAQ9G,KAAK6F,GAAME,OAJJ,2CAAH,qDAQV2E,EAAsB+B,uBAAY,SAACtF,GACvCiF,EAAcjF,EAAEC,OAA4BC,SAC3C,IACGsD,EAAuB8B,uBAAY,SAACtF,GAAQ+E,EAAc/E,EAAE8H,cAAcnE,MAAQ,IAClFL,EAAkBgC,uBAAY,SAACtF,GAAQ6E,EAAS7E,EAAE8H,cAAcnE,MAAQ,IAE9E,OACE,gBAACnB,GAAD,WACE,8CACA,eAACF,GAAD,CACExK,IAAKoM,EACL6D,YAAa7B,EACb8B,aAAcxC,EACdyC,YAAa/B,EACbgC,WAAYR,EACZS,YAAa3C,EACb4C,aAAcV,EACdW,UAAWX,EACX/D,GAAG,SACHwD,MAAOmB,OAAOC,WAAa,IAA0B,IAApBD,OAAOC,WAAoB,IAC5DnB,OAAQkB,OAAOC,WAAa,IAA0B,IAApBD,OAAOC,WAAoB,MAE/D,eAAC,GAAD,CACE7E,YAAaT,EACbQ,iBAAkBqB,EAClBvB,oBAAqBA,EACrBD,gBAAiBA,EACjBE,qBAAsBA,IAExB,gBAAC,GAAD,WACE,eAAC,GAAD,CAAYlD,GAAG,QAAf,qBACA,eAAC,GAAD,CAAQrC,UAAQ,EAACoC,QA7CH,WACd+D,GAAOF,GAAaA,EAAUiB,SAChCf,EAAI8C,UAAU,EAAG,EAAGhD,EAAUiB,QAAQgC,MAAOjD,EAAUiB,QAAQiC,SA2C7D,0BACA,eAAC,GAAD,CAAQ/G,QAASuH,EAAjB,sCC1JOY,GApBO,kBACpB,eAAC,KAAD,UACE,gBAAC,KAAD,WACE,eAAC,KAAD,CAAUC,KAAM/J,GAAMC,KAAM2B,GAAI5B,GAAME,KAAM8J,OAAK,IACjD,eAAC,KAAD,CAAOjP,KAAMiF,GAAMG,MAAnB,SACE,eAAC,GAAD,MAEF,eAAC,KAAD,CAAOpF,KAAMiF,GAAMI,SAAnB,SACE,eAAC,GAAD,MAEF,eAAC,KAAD,CAAOrF,KAAMiF,GAAME,KAAnB,SACE,eAAC,GAAD,MAEF,eAAC,KAAD,CAAOnF,KAAMiF,GAAMK,MAAnB,SACE,eAAC,GAAD,YCpBR4J,IAASC,OACP,gBAAC,IAAMC,WAAP,WACE,eAAC,GAAD,IACA,eAAC,IAAD,CAAUvL,MAAOA,GAAjB,SACE,eAAC,GAAD,SAGJwL,SAASC,eAAe,W","file":"static/js/main.83a0f719.chunk.js","sourcesContent":["import firebase from 'firebase';\r\n\r\nconst {\r\n  REACT_APP_FIREBASE_API_KEY,\r\n  REACT_APP_AUTH_DOMAIN,\r\n  REACT_APP_DATABASE_URL,\r\n  REACT_APP_PROJECT_ID,\r\n  REACT_APP_STORAGE_BUCKET,\r\n  REACT_APP_MESSAGING_SENDER_ID,\r\n  REACT_APP_APP_ID,\r\n} = process.env;\r\n\r\nconst firebaseConfig = {\r\n  apiKey: REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: REACT_APP_AUTH_DOMAIN,\r\n  projectId: REACT_APP_PROJECT_ID,\r\n  storageBucket: REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: REACT_APP_MESSAGING_SENDER_ID,\r\n  appId: REACT_APP_APP_ID,\r\n  databaseURL: REACT_APP_DATABASE_URL,\r\n};\r\n// // Initialize Firebase\r\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\r\n// firebase.analytics();\r\nconst database = firebaseApp.database();\r\nconst auth = firebaseApp.auth();\r\nconst storage = firebaseApp.storage();\r\n\r\n// if (window.location.hostname === \"localhost\") {\r\n//   // Point to the RTDB emulator running on localhost.\r\n//   database.useEmulator(\"localhost\", 9000);\r\n//   auth.useEmulator(\"localhost\", 9099);\r\n// }\r\n\r\nexport { database, auth, storage };\r\n","import { database } from 'core/api/firebase';\r\nimport { Post } from 'core/utils/types';\r\n\r\ninterface Posts {\r\n  [name:string]:Post\r\n}\r\n\r\nexport const createUser = async (uid:string, username:string):Promise<boolean> => {\r\n  const tasksRef = database.ref(`users/${uid}`);\r\n  const newUser = { username: '' };\r\n  newUser.username = username;\r\n  return tasksRef.update(newUser).then(() => true);\r\n};\r\n\r\nexport const getPosts = async (route:string):Promise<Posts> => {\r\n  const postsRef = database.ref(route);\r\n  return postsRef.get().then((snapshot) => {\r\n    console.log(snapshot);\r\n    if (snapshot.exists()) {\r\n      return snapshot.val();\r\n    }\r\n    const message = 'No data availible';\r\n    throw message;\r\n  });\r\n};\r\n\r\nexport const addNewPost = async (newPost:Post, route:string):Promise<boolean> => {\r\n  const postsRef = database.ref(route);\r\n  return postsRef.push(newPost).then(() => true);\r\n};\r\n\r\nexport const getUsername = async (uid:string):Promise<string> => {\r\n  const postsRef = database.ref(`users/${uid}/username`);\r\n  return postsRef.get().then((snapshot) => {\r\n    console.log(snapshot);\r\n    if (snapshot.exists()) {\r\n      return snapshot.val();\r\n    }\r\n    const message = 'No data availible';\r\n    throw message;\r\n  });\r\n};\r\n","import { storage } from 'core/api/firebase';\r\nimport { v4 } from 'uuid';\r\n\r\nexport const saveImage = async (data:string, uid:string):Promise<string> => storage.ref()\r\n  .child(`images/${uid}/${v4()}.png`)\r\n  .putString(data, 'data_url')\r\n  .then((snapshot) => { console.log(snapshot); return snapshot.metadata.fullPath; })\r\n  .catch((error) => {\r\n    throw error;\r\n  });\r\n\r\nexport const getImage = async (path:string):Promise<string> => (\r\n  storage.ref().child(path).getDownloadURL().then((url) => url)\r\n    .catch((error) => {\r\n      throw error;\r\n    }));\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { addNewPost, getPosts } from 'core/services/firebaseDBQueries';\r\nimport { saveImage, getImage } from 'core/services/firebaseStorageQueries';\r\nimport { Post } from 'core/utils/types';\r\n\r\nexport const fetchPosts = createAsyncThunk('postsFeed/fetchPosts', async () => {\r\n  const res = await getPosts('posts');\r\n  return res;\r\n});\r\n\r\nexport const savePost = createAsyncThunk('postsFeed/savePost',\r\n  async ({ img, uid, username }: {img:string, uid:string, username:string}) => {\r\n    const imgPath = await saveImage(img, uid);\r\n    const imgURL = await getImage(imgPath);\r\n    const newPost = { path: imgURL, author: username, date: new Date(Date.now()).toString() };\r\n    await addNewPost(newPost, 'posts');\r\n  });\r\n\r\nexport const PostsFeedSlice = createSlice({\r\n  name: 'postsFeed',\r\n  initialState: [] as Post[],\r\n  reducers: {\r\n    // setPosts(state, action: PayloadAction<Post[]>) {\r\n    //   // action.payload.map((farmerMap) => state.push(farmerMap));\r\n    // },\r\n  },\r\n  extraReducers: {\r\n    [fetchPosts.fulfilled.toString()]: (state, action:PayloadAction<Post>) => (\r\n      Object.entries(action.payload).map((postsFeed) => postsFeed[1])\r\n    ),\r\n    [fetchPosts.rejected.toString()]: (state, action) => {\r\n      // action.payload.map((postsFeed) => state.push(postsFeed));\r\n      console.log(action);\r\n    },\r\n  },\r\n});\r\n\r\nexport default PostsFeedSlice.reducer;\r\n","const ERROR_MESSAGES: Record<string, string> = {\r\n  'auth/invalid-email': 'Enter valid email please',\r\n  'auth/user-not-found': 'User with this email not found',\r\n  'auth/wrong-password': 'Wrong password, try again',\r\n  'auth/weak-password':\r\n      'Password is too weak, it should be at least 6 characters',\r\n  'auth/email-already-in-use': 'This email is already taken',\r\n  default: 'Something went wrong :C',\r\n} as const;\r\n\r\nexport default ERROR_MESSAGES;\r\n","import { auth } from 'core/api/firebase';\r\nimport ERROR_MESSAGES from 'core/utils/constants/errors';\r\n\r\nexport const loginUser = async (email:string, password:string):Promise<string> => auth\r\n  .signInWithEmailAndPassword(email, password)\r\n  .then((userCredential) => {\r\n    if (userCredential.user) return userCredential.user.uid;\r\n    return '';\r\n  })\r\n  .catch((error) => {\r\n    const message = ERROR_MESSAGES[error.code]\r\n      ? ERROR_MESSAGES[error.code]\r\n      : ERROR_MESSAGES.default;\r\n    throw message;\r\n  });\r\n\r\nexport const registerUser = async (email:string, password:string) : Promise<string> => auth\r\n  .createUserWithEmailAndPassword(email, password)\r\n  .then((userCredential) => {\r\n    if (userCredential.user) return userCredential.user.uid;\r\n    return '';\r\n  })\r\n  .catch((error) => {\r\n    const message = ERROR_MESSAGES[error.code]\r\n      ? ERROR_MESSAGES[error.code]\r\n      : ERROR_MESSAGES.default;\r\n    throw message;\r\n  });\r\n\r\nexport const logoutUser = async (): Promise<void> => auth.signOut();\r\n","import { createSlice, PayloadAction, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport { createUser, getUsername } from 'core/services/firebaseDBQueries';\r\nimport {\r\n  loginUser, logoutUser, registerUser,\r\n} from 'core/services/firebaseAuthQueries';\r\nimport { UserData } from 'core/utils/types';\r\n\r\nexport const signUp = createAsyncThunk('user/signUp',\r\n  async ({ email, password, username }:{email:string, password:string, username:string}) => {\r\n    const registerRes = await registerUser(email, password);\r\n    await createUser(registerRes, username);\r\n    return { uid: registerRes, username };\r\n  });\r\n\r\nexport const signIn = createAsyncThunk('user/signIn',\r\n  async ({ email, password }: {email:string, password:string}) => {\r\n    const loginRes = await loginUser(email, password);\r\n    const usernameRes = await getUsername(loginRes);\r\n    return { uid: loginRes, username: usernameRes };\r\n  });\r\n\r\nexport const logOut = createAsyncThunk('user/logOut', async () => {\r\n  await logoutUser();\r\n});\r\n\r\nexport const userSlice = createSlice({\r\n  name: 'user',\r\n  initialState: {\r\n    uid: '', username: '', isLoggedIn: false, isError: false, errorMessage: '',\r\n  } as UserData,\r\n  reducers: {\r\n    clearState(state) {\r\n      return { ...state, isError: false };\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [signIn.fulfilled.toString()]: (state, action) => ({\r\n      ...state, uid: action.payload.uid, username: action.payload.username, isLoggedIn: true,\r\n    }),\r\n    [signIn.rejected.toString()]: (state, action) => ({\r\n      ...state, isError: true, errorMessage: action.error.message,\r\n    }),\r\n    [signUp.fulfilled.toString()]: (state, action) => ({\r\n      ...state, uid: action.payload.uid, username: action.payload.username, isLoggedIn: true,\r\n    }),\r\n    [signUp.rejected.toString()]: (state, action) => ({\r\n      ...state, isError: true, errorMessage: action.error.message,\r\n    }),\r\n    [logOut.fulfilled.toString()]: (state) => ({\r\n      ...state, isLoggedIn: false,\r\n    }),\r\n  },\r\n});\r\n\r\nexport const { clearState } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n","import { combineReducers } from '@reduxjs/toolkit';\r\nimport postsFeedReducer from 'redux/slices/PostFeedSlice';\r\nimport userReducer from 'redux/slices/UserSlice';\r\n\r\nconst rootReducer = combineReducers({\r\n  postsFeed: postsFeedReducer,\r\n  userData: userReducer,\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\nexport default rootReducer;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport rootReducer from './rootReducer';\r\n// ...\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import { createGlobalStyle } from 'styled-components';\n\nconst GlobalStyles = createGlobalStyle`\n  body {\n    margin: 0;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\",\n      \"Ubuntu\", \"Cantarell\", \"Fira Sans\", \"Droid Sans\", \"Helvetica Neue\",\n      sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  code {\n    font-family: source-code-pro, Menlo, Monaco, Consolas, \"Courier New\",\n      monospace;\n  }\n`;\n\nexport default GlobalStyles;\n","import styled from 'styled-components';\r\n\r\nconst TextInput = styled.input`\r\n  font-family: inherit;\r\n  height: 30px;\r\n  border: 3px solid orange;\r\n  border-radius: 10px;\r\n  width: 280px;\r\n  outline: none;\r\n`;\r\n\r\nexport default TextInput;\r\n","import styled from 'styled-components';\r\n\r\nconst Button = styled.button<{isDanger?:boolean}>`\r\n  max-width: 220px;\r\n  width: 40%;\r\n  height: 30px;\r\n  background-color:${(props) => (props.isDanger ? 'red' : 'orange')};\r\n  border: 0;\r\n  border-radius: 10px;\r\n  color: white;\r\n  outline: none;\r\n  cursor: pointer;\r\n  font-size: 14px;\r\n`;\r\n\r\nexport default Button;\r\n","import { toast, ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nexport const showErrorToast = (text: string): void => {\r\n  toast.error(text, {\r\n    position: toast.POSITION.TOP_CENTER,\r\n    autoClose: 3500,\r\n  });\r\n};\r\n\r\nexport const showSuccessToast = (text: string): void => {\r\n  toast.success(text, {\r\n    position: toast.POSITION.TOP_CENTER,\r\n    autoClose: 3500,\r\n  });\r\n};\r\n\r\nexport default ToastContainer;\r\n","const LINKS: Record<string, string> = {\r\n  ROOT: '/',\r\n  HOME: '/home',\r\n  LOGIN: '/login',\r\n  REGISTER: '/register',\r\n  PAINT: '/paint',\r\n} as const;\r\n\r\nexport default LINKS;\r\n","import { RootState } from 'app/rootReducer';\r\nimport { UserData } from 'core/utils/types';\r\n\r\nconst getUserData = (state: RootState): UserData => state.userData;\r\n\r\nexport default getUserData;\r\n","import styled from 'styled-components';\r\n\r\nexport const LoginWrapper = styled.div`\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  font-family: \"Rowdies\";\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  background-color: orange;\r\n  & > span {\r\n    color: white;\r\n    font-size: 50px;\r\n    margin-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport const LoginContainer = styled.div`\r\n  width: 300px;\r\n  height: 400px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: white;\r\n  justify-content: space-evenly;\r\n`;\r\n","import LoginPage from './Login';\n\nexport default LoginPage;\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport TextInput from 'core/components/styled/TextInput';\r\nimport Button from 'core/components/styled/Button';\r\nimport ToastContainer, { showErrorToast } from 'core/services/showToast';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { signIn, clearState } from 'redux/slices/UserSlice';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { LoginWrapper, LoginContainer } from './styles';\r\n\r\nconst LoginPage: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  const { isLoggedIn, isError, errorMessage } = useSelector(getUserData);\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const handleLogin = async () => {\r\n    if (email === '' || password === '') {\r\n      showErrorToast('Fill all fields please');\r\n      return;\r\n    }\r\n\r\n    dispatch(signIn({ email, password }));\r\n    // const res = await loginUser(email, password);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      dispatch(clearState());\r\n      history.push(LINKS.HOME);\r\n    }\r\n\r\n    if (isError) {\r\n      showErrorToast(errorMessage);\r\n      dispatch(clearState());\r\n    }\r\n  }, [isLoggedIn, isError]);\r\n\r\n  return (\r\n    <LoginWrapper>\r\n      <span>Mini-Paint</span>\r\n      <LoginContainer>\r\n        <span>Please Login</span>\r\n        <TextInput\r\n          onChange={(e) => setEmail((e.target as HTMLInputElement).value)}\r\n          value={email}\r\n          type=\"text\"\r\n          placeholder=\"E-mail\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setPassword((e.target as HTMLInputElement).value)}\r\n          value={password}\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n        />\r\n        <Button onClick={handleLogin}>Sign In</Button>\r\n        <Link to=\"/register\">Dont have an account? Sign Up here!</Link>\r\n      </LoginContainer>\r\n      <ToastContainer />\r\n    </LoginWrapper>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n","import styled from 'styled-components';\r\n\r\nexport const RegisterWrapper = styled.div`\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  font-family: \"Rowdies\";\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-start;\r\n  align-items: center;\r\n  background-color: orange;\r\n  & > span {\r\n    color: white;\r\n    font-size: 50px;\r\n    margin-bottom: 50px;\r\n  }\r\n`;\r\n\r\nexport const RegisterContainer = styled.div`\r\n  width: 300px;\r\n  height: 400px;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  background-color: white;\r\n  justify-content: space-evenly;\r\n`;\r\n","import RegisterPage from './Register';\n\nexport default RegisterPage;\n","import React, { useEffect, useState } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport TextInput from 'core/components/styled/TextInput';\r\nimport Button from 'core/components/styled/Button';\r\nimport ToastContainer, { showErrorToast } from 'core/services/showToast';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { clearState, signUp } from 'redux/slices/UserSlice';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { RegisterWrapper, RegisterContainer } from './styles';\r\n\r\nconst RegisterPage: React.FC = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [passwordComfirm, setPasswordConfirm] = useState('');\r\n  const [username, setUsername] = useState('');\r\n\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n  const { isError, isLoggedIn, errorMessage } = useSelector(getUserData);\r\n\r\n  const handleSignUp = async () => {\r\n    if (\r\n      email === ''\r\n      || username === ''\r\n      || password === ''\r\n      || passwordComfirm === ''\r\n    ) {\r\n      showErrorToast('Fill all fields please');\r\n      return;\r\n    }\r\n    if (password !== passwordComfirm) {\r\n      showErrorToast('Passwords should match');\r\n      return;\r\n    }\r\n\r\n    dispatch(signUp({ email, password, username }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      dispatch(clearState());\r\n      history.push(LINKS.HOME);\r\n    }\r\n    if (isError) {\r\n      dispatch(clearState());\r\n      showErrorToast(errorMessage);\r\n    }\r\n  });\r\n\r\n  return (\r\n    <RegisterWrapper>\r\n      <span>Mini-Paint</span>\r\n      <RegisterContainer>\r\n        <span>Please Register</span>\r\n        <TextInput\r\n          onChange={(e) => setEmail((e.target as HTMLInputElement).value)}\r\n          value={email}\r\n          type=\"text\"\r\n          placeholder=\"E-mail\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setUsername((e.target as HTMLInputElement).value)}\r\n          value={username}\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setPassword((e.target as HTMLInputElement).value)}\r\n          value={password}\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n        />\r\n        <TextInput\r\n          onChange={(e) => setPasswordConfirm((e.target as HTMLInputElement).value)}\r\n          value={passwordComfirm}\r\n          type=\"password\"\r\n          placeholder=\"Comfirm password\"\r\n        />\r\n        <Button onClick={handleSignUp}>Sign Up</Button>\r\n        <Link to=\"/login\">Already have an account? Sign In here!</Link>\r\n      </RegisterContainer>\r\n      <ToastContainer />\r\n    </RegisterWrapper>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;\r\n","import styled from 'styled-components';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst ButtonLink = styled(Link)`\r\n  max-width: 220px;\r\n  width: 40%;\r\n  height: 30px;\r\n  background-color: orange;\r\n  border: 0;\r\n  border-radius: 10px;\r\n  color: white;\r\n  outline: none;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-decoration: none;\r\n`;\r\n\r\nexport default ButtonLink;\r\n","import styled from 'styled-components';\r\n\r\nexport const PaintListWrapper = styled.div`\r\n  width: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  max-width: 768px;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  margin:20px;\r\n`;\r\n","import { RootState } from 'app/rootReducer';\r\nimport { Post } from 'core/utils/types';\r\n\r\nconst getPosts = (state: RootState): Post[] => state.postsFeed;\r\n\r\nexport default getPosts;\r\n","import styled from 'styled-components';\r\n\r\nexport const FeedWrapper = styled.div`\r\n    max-width: 768px;\r\n    display:flex;\r\n    flex-direction: column;\r\n    align-items:center;\r\n`;\r\n\r\nexport const PostItem = styled.div`\r\n    min-height: 320px;\r\n    width: 90%;\r\n    display:flex;\r\n    flex-direction: column;\r\n    align-items:center;\r\n    margin-top:20px;\r\n\r\n    & > img {\r\n        border: 10px solid black;\r\n        width: 100%;\r\n    }\r\n\r\n    & > div {\r\n        width: 100%;\r\n        display:flex;\r\n        flex-direction: row;\r\n        justify-content:space-evenly;\r\n    }\r\n`;\r\n","import PostsFeed from './PostsFeed';\r\n\r\nexport default PostsFeed;\r\n","import React, { useMemo, useState } from 'react';\r\nimport { useSelector, useStore } from 'react-redux';\r\nimport getPosts from 'redux/selectors/PostFeedSelector';\r\nimport { formatDistance, compareDesc } from 'date-fns';\r\nimport TextInput from 'core/components/styled/TextInput';\r\nimport { FeedWrapper, PostItem } from './styles';\r\n\r\nconst PostsFeed = (): JSX.Element => {\r\n  const [filter, setFilter] = useState('');\r\n  const posts = useSelector(getPosts);\r\n  const postItems = useMemo(\r\n    () => {\r\n      const filteredPosts = filter === '' ? posts.slice()\r\n        : posts.filter((value) => value.author.toLowerCase().includes(filter.toLowerCase()));\r\n      return filteredPosts.sort((a, b) => compareDesc(new Date(a.date), new Date(b.date)))\r\n        .map((post) => (\r\n          <PostItem>\r\n            <img src={post.path} alt=\"\" />\r\n            <div>\r\n              <span>\r\n                Author:\r\n                {' '}\r\n                {post.author}\r\n              </span>\r\n              <span>\r\n                Date:\r\n                {' '}\r\n                {formatDistance(new Date(Date.now()), new Date(post.date))}\r\n                {' '}\r\n                ago\r\n              </span>\r\n            </div>\r\n          </PostItem>\r\n        ));\r\n    },\r\n    [posts, filter],\r\n  );\r\n  return (\r\n    <>\r\n      <TextInput\r\n        onChange={(e) => setFilter((e.target as HTMLInputElement).value)}\r\n        value={filter}\r\n        type=\"text\"\r\n        placeholder=\"Filter by user\"\r\n      />\r\n      <FeedWrapper>{postItems}</FeedWrapper>\r\n    </>\r\n  );\r\n};\r\nexport default PostsFeed;\r\n","import HomePage from './HomePage';\r\n\r\nexport default HomePage;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Button from 'core/components/styled/Button';\r\nimport ButtonLink from 'core/components/styled/Link';\r\nimport LINKS from 'core/utils/constants/links';\r\n\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { fetchPosts } from 'redux/slices/PostFeedSlice';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { logOut } from 'redux/slices/UserSlice';\r\nimport { PaintListWrapper, ButtonWrapper } from './styles';\r\nimport PostsFeed from './components/PostsFeed';\r\n\r\nconst HomePage:React.FC = () => {\r\n  const history = useHistory();\r\n\r\n  const { isLoggedIn } = useSelector(getUserData);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn) {\r\n      dispatch(fetchPosts());\r\n    } else {\r\n      history.push(LINKS.LOGIN);\r\n    }\r\n  }, [isLoggedIn]);\r\n\r\n  const handleLogOut = async () => {\r\n    dispatch(logOut());\r\n  };\r\n\r\n  return (\r\n    <PaintListWrapper>\r\n      <ButtonWrapper>\r\n        <ButtonLink to={LINKS.PAINT}>+ New painting</ButtonLink>\r\n        <Button onClick={handleLogOut}>Log Out</Button>\r\n      </ButtonWrapper>\r\n      <PostsFeed />\r\n    </PaintListWrapper>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","import styled from 'styled-components';\r\n\r\nexport const StyledCanvas = styled.canvas`\r\n    border: 5px solid black;\r\n`;\r\n\r\nexport const PaintWrapper = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items:center;\r\n    min-height: 100vh;\r\n    & > span {\r\n        font-size: 50px;\r\n        font-weight: bolder;\r\n    }\r\n`;\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  max-width: 768px;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  margin:20px;\r\n\r\n  @media(max-width:768px) {\r\n      flex-direction: column;\r\n      align-items: center;\r\n  }\r\n\r\n  & > * {\r\n      margin-bottom: 20px;\r\n  }\r\n`;\r\n","const colors = [\r\n  'black',\r\n  'red',\r\n  'green',\r\n  'blue',\r\n  'yellow',\r\n  'purple',\r\n  'pink',\r\n  'cyan',\r\n  'brown',\r\n  'orange',\r\n  'silver',\r\n  'gold',\r\n  'lime'];\r\n\r\nexport default colors;\r\n","import brush from 'core/assets/brush.png';\r\nimport rect from 'core/assets/rect.png';\r\nimport circle from 'core/assets/circle.png';\r\nimport line from 'core/assets/line.png';\r\n\r\nconst instruments = [brush, line, rect, circle];\r\n\r\nexport default instruments;\r\n","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGcSURBVHic5dK9TQNBEIDRt0BGAyAyR/RARAM0QUAHroBaKMANEJETIiERAl0sgY2ELGP77Lv9nXCieZ8mxBj1MiGEGea4wwKPZ3lPSjchhGs842K1eoDQwwdswP/O10mGe5LOFjwsmv6AHfhv3DT7AXvgb2OMH00G2BP/Bs0FGIKnsQBD8TQU4BA8jQQ4FE8DAY7BU3mAY/FUHGAMPJUGGAtPhQHGxFNZgLHxVBRgCjyVBJgKTwUBpsRTeICp8RQcIAWeQgOkwlNggJR4CguQGk9BAXLgKSRALjwFBMiJJ3OA3HgyBigBT6YApeDJEKAkPIkDlIYnYYAS8SQKUCqeBAFKxjNxgNLxTBigBjwTBagFzwQBasIzcoDa8IwYoEY8IwWoFc8IAWrGc2SA2vEcEaAFPAcGaAXPAQFawjMwQGt4BgRoEc+eAVrFs0eAlvHsCNA6ni0BesDzT4Be8GwI0BOetQC94fkToEc8qwC94iFghhcd4ll+wFyneJYf8InLtX0XeJYfsFjbdYOHU7ziHFd4wn2M8T3rVQnnBxnUc+IPCTq6AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAApXAAAKVwGn8z/gAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAABJQTFRF////AAAAAAAAAAAAAAAAAAAAZJzAmgAAAAV0Uk5TAECQsMTcoE5tAAAAN0lEQVRIS2NgGAUjCSgRAAyhBABDqLMxHmACVCCAzwGMowpGFYwqGCgFBDMvoexPsAAZBSMJAACc1z+f7W9pCwAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAJ1SURBVHic7Zu9ahtBFIW/2biJIVUiAnZp3PoJXLlIJxBWmSqFX0MPY0gtgTsVwYXRQwgM28hgsJtE2I2jm2JW0Wq9a8nyzt6RZw4cthGrew6z83fvNSKCSxhjdoET4ADYA/az55wANzlOsuc18EtEHpzG58IAY8xnoA10gG/Axw1f9QgMgQFwISL39USYg4jUQmAHOAMugSdAauZT9u4zYKe2uGsS3wXGDkRXcQx01Q0AjoFRg8KLHAHHjRsAtIC+ovAi+0CrEQOAIyD1QHSRKXDk1ADgFJh6ILaKU+C0dgMAA/SAmQciV3GWxWpqMSATf+6BsNfyfB0T1jGg54GYTdl7kwHYb34bhn0VZ6yYE1bN9j5PeOtyygurQ5X4Fn4udZsypWKfUGWAT5ucuthfywDs9lY7WFd8tm0uM0Bzb++aoxcNwJ7qtIN0zW6pAdjzfJNHWi2Oyd0nJCzwAzjk/eMQqxVgyYDvzceihv9ajYjM7/BugQ96MTWKv8BXEbmfj4A24YgHq7UNi0+goxeLGjpgj7q7wB2bX11vKx6BLwk2aRGaeLCaTxJsxiZUHCQs0lMhYi/B5upCxX4cAQRugAF+A5+0I1HCn2T1b943EmwxQqi4iQYQDWCiHYUiJnEEYKuxQsV1PA6LrcMbakejgKGIPMw3QgPVUHQwgHgpai9FxVZgXunG1CiuMs1LeYGfSsFoYKE19NRYTI7G9HgskIglMrFIKpbJVZsQbqFkzoRwS2UzA8Iuls6ZEGa5fMmc4PPE6KZhomR1SD0QW2SK65aZnAnhNk0VjAizba7EiDAbJwsmbGXrbPDN004MWPoDz9vn/wFoczxjtZ8dQAAAAABJRU5ErkJggg==\"","import styled from 'styled-components';\r\n\r\nexport const ControlPanelWrapper = styled.div`\r\n    max-width: 500px;\r\n    min-height: 400px;\r\n    width:90%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n`;\r\n\r\nexport const ColorPickerContainer = styled.div`\r\n    width: 100%;\r\n    height: 75%;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n`;\r\n\r\nexport const InstrumentPickerContainer = styled.div`\r\n    width: 100%;\r\n    min-height: 70px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    justify-content: center;\r\n`;\r\n\r\nexport const Instrument = styled.img<{isPicked:boolean}>`\r\n    width: 50px;\r\n    height: 50px;\r\n    margin: 20px;\r\n    ${(props) => (props.isPicked ? 'border: 2px dotted black;' : '')}\r\n`;\r\n\r\nexport const ColorPickerItem = styled.div<{isPicked:boolean}>`\r\n    width: 50px;\r\n    height: 50px;\r\n    border-radius: 50%;\r\n    margin: 20px;\r\n    background-color: ${(props) => props.color};\r\n    ${(props) => (props.isPicked ? 'padding:5px;' : '')}\r\n`;\r\n\r\nexport const LineWidthSlider = styled.input`\r\n    width: 200px;\r\n    height: 10px;\r\n    margin: 20px;\r\n`;\r\n","import ControlPanel from './ControlPanel';\r\n\r\nexport default ControlPanel;\r\n","import React, { SyntheticEvent } from 'react';\r\nimport colors from './colors';\r\nimport instruments from './instruments';\r\nimport {\r\n  ControlPanelWrapper,\r\n  ColorPickerContainer,\r\n  ColorPickerItem,\r\n  LineWidthSlider,\r\n  InstrumentPickerContainer,\r\n  Instrument,\r\n} from './styles';\r\n\r\ninterface ControlPanelProps {\r\n  handleColorPick: (e: SyntheticEvent) => void;\r\n  handleLineWidthPick: (e: SyntheticEvent) => void;\r\n  handleInstrumentPick: (e: SyntheticEvent) => void;\r\n  pickedInstrument: string;\r\n  pickedColor:string;\r\n}\r\n\r\nconst ControlPanel = React.memo((props: ControlPanelProps): JSX.Element => {\r\n  const {\r\n    handleColorPick, handleLineWidthPick, handleInstrumentPick, pickedInstrument, pickedColor,\r\n  } = props;\r\n  return (\r\n    <ControlPanelWrapper>\r\n      <span>Colors:</span>\r\n      <ColorPickerContainer>\r\n        {colors.map((value) => (\r\n          <ColorPickerItem\r\n            isPicked={value === pickedColor}\r\n            id={value}\r\n            onClick={handleColorPick}\r\n            color={value}\r\n          />\r\n        ))}\r\n      </ColorPickerContainer>\r\n      <span>Tools:</span>\r\n      <InstrumentPickerContainer>\r\n        {instruments.map((value, index) => (\r\n          <Instrument\r\n            isPicked={index.toString() === pickedInstrument}\r\n            src={value}\r\n            id={index.toString()}\r\n            onClick={handleInstrumentPick}\r\n          />\r\n        ))}\r\n      </InstrumentPickerContainer>\r\n      <span>Thickness:</span>\r\n      <LineWidthSlider\r\n        defaultValue={1}\r\n        min={1}\r\n        max={20}\r\n        step={1}\r\n        type=\"range\"\r\n        onChange={handleLineWidthPick}\r\n      />\r\n    </ControlPanelWrapper>\r\n  );\r\n});\r\n\r\nexport default ControlPanel;\r\n","import Paint from './Paint';\r\n\r\nexport default Paint;\r\n","import React, {\r\n  SyntheticEvent, useCallback, useEffect, useLayoutEffect, useRef, useState,\r\n} from 'react';\r\nimport Button from 'core/components/styled/Button';\r\nimport getUserData from 'redux/selectors/UserSelector';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport ButtonLink from 'core/components/styled/Link';\r\nimport LINKS from 'core/utils/constants/links';\r\nimport { savePost } from 'redux/slices/PostFeedSlice';\r\nimport { PaintWrapper, StyledCanvas, ButtonWrapper } from './styles';\r\nimport ControlPanel from './components/ControlPanel';\r\n\r\ninterface Position {\r\n    offsetX: number,\r\n    offsetY: number\r\n}\r\n\r\nconst Paint: React.FC = () => {\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n\r\n  const [ctx, setCtx] = useState<CanvasRenderingContext2D | null>();\r\n  const [isPainting, setIsPainting] = useState<boolean>(false);\r\n  const [prevPos, setPrevPosition] = useState<Position>({ offsetX: 0, offsetY: 0 });\r\n  const [snapshot, setSnapshot] = useState<ImageData>();\r\n  const [color, setColor] = useState('black');\r\n  const [instrument, setInstrument] = useState('0');\r\n  const [lineWidth, setLineWidth] = useState('1');\r\n\r\n  const history = useHistory();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { username, isLoggedIn, uid } = useSelector(getUserData);\r\n\r\n  useEffect(() => {\r\n    if (!isLoggedIn) history.push(LINKS.LOGIN);\r\n  }, [isLoggedIn]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (canvasRef && canvasRef.current) {\r\n      setCtx(canvasRef.current.getContext('2d'));\r\n    }\r\n  }, []);\r\n\r\n  const loadSnapshot = useCallback(() => {\r\n    console.log(snapshot);\r\n    if (snapshot) { ctx?.putImageData(snapshot, 0, 0); }\r\n  }, [snapshot]);\r\n\r\n  const handleMouseDown = ({ nativeEvent } : SyntheticEvent) => {\r\n    nativeEvent.preventDefault();\r\n    if (nativeEvent instanceof TouchEvent) {\r\n      const touch = nativeEvent as TouchEvent;\r\n      const { pageX, pageY } = touch.touches[0];\r\n      console.log(touch.touches[0]);\r\n      setPrevPosition({\r\n        offsetX: pageX - canvasRef.current!.offsetLeft,\r\n        offsetY: pageY - canvasRef.current!.offsetTop,\r\n      });\r\n    } else {\r\n      const { offsetX, offsetY } = nativeEvent as MouseEvent;\r\n      setPrevPosition({ offsetX, offsetY });\r\n    }\r\n\r\n    loadSnapshot();\r\n    setIsPainting(true);\r\n  };\r\n\r\n  const paint = (currPosition : Position) => {\r\n    const { offsetX, offsetY } = currPosition;\r\n    const { offsetX: x, offsetY: y } = prevPos;\r\n    console.log(prevPos, currPosition);\r\n    if (ctx) {\r\n      const deltaX = x - offsetX;\r\n      const deltaY = y - offsetY;\r\n      const radius = Math.sqrt(deltaX * deltaX + deltaY * deltaY);\r\n      ctx.strokeStyle = color;\r\n      ctx.lineCap = 'round';\r\n      ctx.lineWidth = parseInt(lineWidth, 10);\r\n      ctx.beginPath();\r\n      switch (instrument) {\r\n        case '0':\r\n          ctx.moveTo(x, y);\r\n          ctx.lineTo(offsetX, offsetY);\r\n          setPrevPosition({ offsetX, offsetY });\r\n          break;\r\n        case '1':\r\n          ctx.clearRect(0, 0, canvasRef.current!.width,\r\n            canvasRef.current!.height);\r\n          loadSnapshot();\r\n          ctx.moveTo(x, y);\r\n          ctx.lineTo(offsetX, offsetY);\r\n          break;\r\n        case '2':\r\n          ctx.clearRect(0, 0, canvasRef.current!.width,\r\n            canvasRef.current!.height);\r\n          loadSnapshot();\r\n          ctx.rect(\r\n            x,\r\n            y,\r\n            offsetX - x,\r\n            offsetY - y,\r\n          );\r\n          break;\r\n        case '3':\r\n          ctx.clearRect(0, 0, canvasRef.current!.width,\r\n            canvasRef.current!.height);\r\n          loadSnapshot();\r\n\r\n          ctx.arc(x, y, radius, 0, Math.PI * 2);\r\n          break;\r\n        default:\r\n      }\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = ({ nativeEvent } : SyntheticEvent) => {\r\n    if (isPainting) {\r\n      let currPos: Position;\r\n      if (nativeEvent instanceof TouchEvent) {\r\n        const touch = nativeEvent as TouchEvent;\r\n        const { pageX, pageY } = touch.touches[0];\r\n        currPos = ({\r\n          offsetX: pageX - canvasRef.current!.offsetLeft,\r\n          offsetY: pageY - canvasRef.current!.offsetTop,\r\n        });\r\n      } else {\r\n        const { offsetX, offsetY } = nativeEvent as MouseEvent;\r\n        currPos = ({ offsetX, offsetY });\r\n      }\r\n      paint(currPos);\r\n    }\r\n  };\r\n\r\n  const endPainting = () => {\r\n    setIsPainting(false);\r\n    setSnapshot(ctx!.getImageData(0, 0, canvasRef.current!.width, canvasRef.current!.height));\r\n  };\r\n\r\n  const handleClear = () => {\r\n    if (ctx && canvasRef && canvasRef.current) {\r\n      ctx.clearRect(0, 0, canvasRef.current.width, canvasRef.current.height);\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    const data = canvasRef.current?.toDataURL();\r\n    if (data) {\r\n      dispatch(savePost({ img: data, uid, username }));\r\n      history.push(LINKS.HOME);\r\n    }\r\n  };\r\n\r\n  const handleLineWidthPick = useCallback((e) => {\r\n    setLineWidth((e.target as HTMLInputElement).value);\r\n  }, []);\r\n  const handleInstrumentPick = useCallback((e) => { setInstrument(e.currentTarget.id); }, []);\r\n  const handleColorPick = useCallback((e) => { setColor(e.currentTarget.id); }, []);\r\n\r\n  return (\r\n    <PaintWrapper>\r\n      <span>Draw here</span>\r\n      <StyledCanvas\r\n        ref={canvasRef}\r\n        onMouseMove={handleMouseMove}\r\n        onTouchStart={handleMouseDown}\r\n        onTouchMove={handleMouseMove}\r\n        onTouchEnd={endPainting}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseLeave={endPainting}\r\n        onMouseUp={endPainting}\r\n        id=\"canvas\"\r\n        width={window.outerWidth < 500 ? window.outerWidth * 0.95 : 500}\r\n        height={window.outerWidth < 500 ? window.outerWidth * 0.95 : 500}\r\n      />\r\n      <ControlPanel\r\n        pickedColor={color}\r\n        pickedInstrument={instrument}\r\n        handleLineWidthPick={handleLineWidthPick}\r\n        handleColorPick={handleColorPick}\r\n        handleInstrumentPick={handleInstrumentPick}\r\n      />\r\n      <ButtonWrapper>\r\n        <ButtonLink to=\"/home\">Go back</ButtonLink>\r\n        <Button isDanger onClick={handleClear}>Clear canvas</Button>\r\n        <Button onClick={handleSave}>Save your drawing</Button>\r\n      </ButtonWrapper>\r\n    </PaintWrapper>\r\n  );\r\n};\r\n\r\nexport default Paint;\r\n","import {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from 'react-router-dom';\nimport React from 'react';\nimport LoginPage from 'core/pages/Login';\nimport RegisterPage from 'core/pages/Register';\nimport HomePage from 'core/pages/HomePage';\nimport Paint from 'core/pages/Paint';\nimport LINKS from 'core/utils/constants/links';\n\nconst App: React.FC = () => (\n  <Router>\n    <Switch>\n      <Redirect from={LINKS.ROOT} to={LINKS.HOME} exact />\n      <Route path={LINKS.LOGIN}>\n        <LoginPage />\n      </Route>\n      <Route path={LINKS.REGISTER}>\n        <RegisterPage />\n      </Route>\n      <Route path={LINKS.HOME}>\n        <HomePage />\n      </Route>\n      <Route path={LINKS.PAINT}>\n        <Paint />\n      </Route>\n    </Switch>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport store from './app/store';\nimport GlobalStyles from './globalStyles';\nimport App from './app/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <GlobalStyles />\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}